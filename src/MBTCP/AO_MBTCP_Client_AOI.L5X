<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--Modbus TCP Client-->
<RSLogix5000Content SchemaRevision="1.0" SoftwareRevision="35.00" TargetName="AO_MBTCP_Client" TargetType="AddOnInstructionDefinition" TargetRevision="1.0 " TargetLastEdited="2023-01-12T17:56:16.991Z" ContainsContext="true" ExportDate="Fri Jan 13 17:37:58 2023" ExportOptions="References NoRawData L5KData DecoratedData Context Dependencies ForceProtectedEncoding AllProjDocTrans">
<Controller Use="Context" Name="DEVPAC">
<DataTypes Use="Context">
<DataType Name="ST_MBTCP_ClientConnection" Family="NoFamily" Class="User">
<Members>
<Member Name="LocalSlot" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Local slot of the Ethernet module. ControlLogix: use module slot. CompactLogix: use slot 0.]]>
</Description>
</Member>
<Member Name="LocalAddress" DataType="STR_16" Dimension="0" Radix="NullType" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Used only for controllers with more than one local IP address (5380, 5480). 
For all others leave blank.]]>
</Description>
</Member>
<Member Name="DestAddress" DataType="STR_16" Dimension="0" Radix="NullType" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[IP address of the Modbus TCP server.]]>
</Description>
</Member>
<Member Name="DestPort" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Modbus port number open on the server. Default: 502.]]>
</Description>
</Member>
<Member Name="MsgSrc" DataType="SINT" Dimension="500" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Contains message source.]]>
</Description>
</Member>
<Member Name="MsgDest" DataType="SINT" Dimension="500" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Contains message destination.]]>
</Description>
</Member>
</Members>
<Dependencies>
<Dependency Type="DataType" Name="STR_16"/>
<Dependency Type="DataType" Name="STR_16"/>
</Dependencies>
</DataType>
<DataType Name="ST_MBTCP_ClientData" Family="NoFamily" Class="User">
<Members>
<Member Name="Coils" DataType="BOOL" Dimension="1024" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[0xxx]]>
</Description>
</Member>
<Member Name="DiscreteInputs" DataType="BOOL" Dimension="1024" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[1xxx]]>
</Description>
</Member>
<Member Name="InputRegisters" DataType="INT" Dimension="1024" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[3xxx]]>
</Description>
</Member>
<Member Name="HoldingRegisters" DataType="INT" Dimension="1024" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[4xxx]]>
</Description>
</Member>
</Members>
</DataType>
<DataType Name="ST_MBTCP_ClientTransaction" Family="NoFamily" Class="User">
<Members>
<Member Name="ZZZZZZZZZZST_MBTCP_C0" DataType="SINT" Dimension="0" Radix="Decimal" Hidden="true" ExternalAccess="Read/Write"/>
<Member Name="Enabled" DataType="BIT" Dimension="0" Radix="Decimal" Hidden="false" Target="ZZZZZZZZZZST_MBTCP_C0" BitNumber="0" ExternalAccess="Read/Write">
<Description>
<![CDATA[Enables (1) or disables (0) the transaction.]]>
</Description>
</Member>
<Member Name="PollInterval" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Time between triggers (milliseconds).]]>
</Description>
</Member>
<Member Name="Type" DataType="INT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Modbus transaction code. 1: Coil read, 2: Discrete input read, 3: Holding register read, 4: Input register read, 5: Write single coil, 6: Single holding register write, 15: Multiple coil write, 16: Multiple holding register write.]]>
</Description>
</Member>
<Member Name="StationID" DataType="SINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Unit Identifier to use if using a gateway. Otherwise leave as 0.]]>
</Description>
</Member>
<Member Name="BeginAddress" DataType="INT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Beginning address in remote device to read from or write to.]]>
</Description>
</Member>
<Member Name="Count" DataType="INT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Number of items in remote device to read from or write to.]]>
</Description>
</Member>
<Member Name="LocalAddress" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Beginning address in the local data arrays.]]>
</Description>
</Member>
<Member Name="ZZZZZZZZZZST_MBTCP_C8" DataType="SINT" Dimension="0" Radix="Decimal" Hidden="true" ExternalAccess="Read/Write"/>
<Member Name="Complete" DataType="BIT" Dimension="0" Radix="Decimal" Hidden="false" Target="ZZZZZZZZZZST_MBTCP_C8" BitNumber="0" ExternalAccess="Read/Write">
<Description>
<![CDATA[Transaction completed.]]>
</Description>
</Member>
<Member Name="Status" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Transaction status. 0: Success, 1: In process, 2: Retry, 1: Exception.]]>
</Description>
</Member>
<Member Name="Diag" DataType="ST_MBTCP_ClientTransactionDiag" Dimension="0" Radix="NullType" Hidden="false" ExternalAccess="Read/Write"/>
</Members>
<Dependencies>
<Dependency Type="DataType" Name="ST_MBTCP_ClientTransactionDiag"/>
</Dependencies>
</DataType>
<DataType Name="ST_MBTCP_ClientTransactionDiag" Family="NoFamily" Class="User">
<Members>
<Member Name="Request" DataType="STR_462" Dimension="0" Radix="NullType" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Buffer used to build the request string.]]>
</Description>
</Member>
<Member Name="ZZZZZZZZZZST_MBTCP_C1" DataType="SINT" Dimension="0" Radix="Decimal" Hidden="true" ExternalAccess="Read/Write"/>
<Member Name="RequestBuilt" DataType="BIT" Dimension="0" Radix="Decimal" Hidden="false" Target="ZZZZZZZZZZST_MBTCP_C1" BitNumber="0" ExternalAccess="Read/Write">
<Description>
<![CDATA[Request string has been built.]]>
</Description>
</Member>
<Member Name="Overlap" DataType="BIT" Dimension="0" Radix="Decimal" Hidden="false" Target="ZZZZZZZZZZST_MBTCP_C1" BitNumber="1" ExternalAccess="Read/Write">
<Description>
<![CDATA[Transaction did not complete before next trigger.]]>
</Description>
</Member>
<Member Name="Overload" DataType="BIT" Dimension="0" Radix="Decimal" Hidden="false" Target="ZZZZZZZZZZST_MBTCP_C1" BitNumber="2" ExternalAccess="Read/Write">
<Description>
<![CDATA[Transaction is not completing because of overlaps in one or more transactions.]]>
</Description>
</Member>
<Member Name="ID" DataType="INT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Transaction ID used to match reply.]]>
</Description>
</Member>
<Member Name="ErrorCode" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Last transaction error. 0: Success, 2: Network write, 3: Local write, 4: Network read, 5: Local read, 6: Connection failure,12: Invalid transaction code, 13: Data array out of range.]]>
</Description>
</Member>
<Member Name="IntervalTimer" DataType="FBD_TIMER" Dimension="0" Radix="NullType" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Used to trigger transaction.]]>
</Description>
</Member>
<Member Name="NoReplyCount" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write"/>
<Member Name="PendingTimer" DataType="FBD_TIMER" Dimension="0" Radix="NullType" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Used for pending requests.]]>
</Description>
</Member>
</Members>
<Dependencies>
<Dependency Type="DataType" Name="STR_462"/>
</Dependencies>
</DataType>
<DataType Name="ST_MBTCP_ConnectParams" Family="NoFamily" Class="User">
<Members>
<Member Name="Timeout" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write"/>
<Member Name="DestAddress" DataType="STR_32" Dimension="0" Radix="NullType" Hidden="false" ExternalAccess="Read/Write"/>
</Members>
<Dependencies>
<Dependency Type="DataType" Name="STR_32"/>
</Dependencies>
</DataType>
<DataType Name="ST_MBTCP_CreateParams" Family="NoFamily" Class="User">
<Members>
<Member Name="Type" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Type. 1: TCP, 2: UDP.]]>
</Description>
</Member>
<Member Name="Family" DataType="INT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Address family (must be 2).]]>
</Description>
</Member>
<Member Name="Port" DataType="INT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Local port number.]]>
</Description>
</Member>
<Member Name="Address" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write">
<Description>
<![CDATA[Local IP address.]]>
</Description>
</Member>
</Members>
</DataType>
<DataType Name="STR_16" Family="StringFamily" Class="User">
<Members>
<Member Name="LEN" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write"/>
<Member Name="DATA" DataType="SINT" Dimension="16" Radix="ASCII" Hidden="false" ExternalAccess="Read/Write"/>
</Members>
</DataType>
<DataType Name="STR_32" Family="StringFamily" Class="User">
<CustomProperties>
<Provider ID="ACM" Ext="0">
<Header xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Maj="2" Min="0" OExt="-1" UExt="1">
  <Libs>
    <LibHdr CatalogNumber="Test" Guid="94CCB48E-362B-40B2-B5C8-66C930C9596D" />
  </Libs>
</Header>
</Provider>
<Provider ID="ACM" Ext="1">
<Data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Maj="3" Min="0" OExt="-1">
  <Val><![CDATA[<DecoratedData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" MajorRev="1" MinorRev="0" CRC="ToDo">
  <Private xsi:type="UdtPrivateData" Guid="94CCB48E-362B-40B2-B5C8-66C930C9596D" ContentType="Task">
    <Attrib />
    <Subs />
  </Private>
</DecoratedData>]]></Val>
</Data>
</Provider>
</CustomProperties>
<Members>
<Member Name="LEN" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write"/>
<Member Name="DATA" DataType="SINT" Dimension="32" Radix="ASCII" Hidden="false" ExternalAccess="Read/Write"/>
</Members>
</DataType>
<DataType Name="STR_4096" Family="StringFamily" Class="User">
<Members>
<Member Name="LEN" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write"/>
<Member Name="DATA" DataType="SINT" Dimension="4096" Radix="ASCII" Hidden="false" ExternalAccess="Read/Write"/>
</Members>
</DataType>
<DataType Name="STR_462" Family="StringFamily" Class="User">
<Members>
<Member Name="LEN" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write"/>
<Member Name="DATA" DataType="SINT" Dimension="462" Radix="ASCII" Hidden="false" ExternalAccess="Read/Write"/>
</Members>
</DataType>
<DataType Name="STR_8" Family="StringFamily" Class="User">
<CustomProperties>
<Provider ID="ACM" Ext="0">
<Header xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Maj="2" Min="0" OExt="-1" UExt="1">
  <Libs>
    <LibHdr CatalogNumber="Test" Guid="94CCB48E-362B-40B2-B5C8-66C930C9596D" />
  </Libs>
</Header>
</Provider>
<Provider ID="ACM" Ext="1">
<Data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Maj="3" Min="0" OExt="-1">
  <Val><![CDATA[<DecoratedData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" MajorRev="1" MinorRev="0" CRC="ToDo">
  <Private xsi:type="UdtPrivateData" Guid="94CCB48E-362B-40B2-B5C8-66C930C9596D" ContentType="Task">
    <Attrib />
    <Subs />
  </Private>
</DecoratedData>]]></Val>
</Data>
</Provider>
</CustomProperties>
<Members>
<Member Name="LEN" DataType="DINT" Dimension="0" Radix="Decimal" Hidden="false" ExternalAccess="Read/Write"/>
<Member Name="DATA" DataType="SINT" Dimension="8" Radix="ASCII" Hidden="false" ExternalAccess="Read/Write"/>
</Members>
</DataType>
</DataTypes>
<AddOnInstructionDefinitions Use="Context">
<AddOnInstructionDefinition Name="AO_RTC_PulseGen" Revision="1.0" Vendor="Jeremy Medders" ExecutePrescan="true" ExecutePostscan="false" ExecuteEnableInFalse="false" CreatedDate="2020-06-26T18:22:41.463Z" CreatedBy="APEX\Jeremy" EditedDate="2023-01-12T16:23:44.408Z" EditedBy="APEX\Jeremy" SoftwareRevision="v35.00"
>
<Description>
<![CDATA[Generates precision pulses on configurable intervals.]]>
</Description>
<Parameters>
<Parameter Name="EnableIn" TagType="Base" DataType="BOOL" Usage="Input" Radix="Decimal" Required="false" Visible="false" ExternalAccess="Read Only">
<Description>
<![CDATA[Enable Input - System Defined Parameter]]>
</Description>
</Parameter>
<Parameter Name="EnableOut" TagType="Base" DataType="BOOL" Usage="Output" Radix="Decimal" Required="false" Visible="false" ExternalAccess="Read Only">
<Description>
<![CDATA[Enable Output - System Defined Parameter]]>
</Description>
</Parameter>
<Parameter Name="Inp_Enable" TagType="Base" DataType="BOOL" Usage="Input" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
<Parameter Name="Inp_Interval" TagType="Base" DataType="DINT" Usage="Input" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<Description>
<![CDATA[Pulse interval (milliseconds).]]>
</Description>
<DefaultData Format="L5K">
<![CDATA[1000]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="1000"/>
</DefaultData>
</Parameter>
<Parameter Name="Sts_Enabled" TagType="Base" DataType="BOOL" Usage="Output" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
<Parameter Name="Out" TagType="Base" DataType="BOOL" Usage="Output" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
</Parameters>
<LocalTags>
<LocalTag Name="OSR" DataType="BOOL" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="TStart" DataType="LINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="LINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="TNow" DataType="LINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="LINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
</LocalTags>
<Routines>
<Routine Name="Logic" Type="ST">
<STContent>
<Line Number="0">
<![CDATA[]]>
</Line>
<Line Number="1">
<![CDATA[/*]]>
</Line>
<Line Number="2">
<![CDATA[	AO_RTC_PulseGen]]>
</Line>
<Line Number="3">
<![CDATA[	]]>
</Line>
<Line Number="4">
<![CDATA[	Generates precision pulses on configurable intervals.]]>
</Line>
<Line Number="5">
<![CDATA[*/]]>
</Line>
<Line Number="6">
<![CDATA[]]>
</Line>
<Line Number="7">
<![CDATA[GSV(WallClockTime, , CurrentValue, TNow);]]>
</Line>
<Line Number="8">
<![CDATA[]]>
</Line>
<Line Number="9">
<![CDATA[if (Inp_Enable & NOT OSR OR Out) then]]>
</Line>
<Line Number="10">
<![CDATA[	TStart := TNow;]]>
</Line>
<Line Number="11">
<![CDATA[end_if;]]>
</Line>
<Line Number="12">
<![CDATA[OSR := Inp_Enable;]]>
</Line>
<Line Number="13">
<![CDATA[]]>
</Line>
<Line Number="14">
<![CDATA[Sts_Enabled := Inp_Enable;]]>
</Line>
<Line Number="15">
<![CDATA[Out := Inp_Enable & (TNow - TStart >= Inp_Interval * 1000);]]>
</Line>
<Line Number="16">
<![CDATA[]]>
</Line>
</STContent>
</Routine>
<Routine Name="Prescan" Type="ST">
<STContent>
<Line Number="0">
<![CDATA[]]>
</Line>
<Line Number="1">
<![CDATA[/*]]>
</Line>
<Line Number="2">
<![CDATA[	AO_RTC_PulseGen]]>
</Line>
<Line Number="3">
<![CDATA[*/]]>
</Line>
<Line Number="4">
<![CDATA[]]>
</Line>
<Line Number="5">
<![CDATA[OSR := 0;]]>
</Line>
<Line Number="6">
<![CDATA[Out := 0;]]>
</Line>
<Line Number="7">
<![CDATA[]]>
</Line>
</STContent>
</Routine>
</Routines>
</AddOnInstructionDefinition>
<AddOnInstructionDefinition Use="Target" Name="AO_MBTCP_Client" Revision="1.0" Vendor="Jeremy Medders" ExecutePrescan="true" ExecutePostscan="false" ExecuteEnableInFalse="false" CreatedDate="2019-12-05T18:51:23.267Z" CreatedBy="Not Available" EditedDate="2023-01-12T17:56:16.991Z" EditedBy="RLCCONTROLS\jrogers"
 SoftwareRevision="v35.00">
<Description>
<![CDATA[Modbus TCP Client]]>
</Description>
<Parameters>
<Parameter Name="EnableIn" TagType="Base" DataType="BOOL" Usage="Input" Radix="Decimal" Required="false" Visible="false" ExternalAccess="Read Only">
<Description>
<![CDATA[Enable Input - System Defined Parameter]]>
</Description>
</Parameter>
<Parameter Name="EnableOut" TagType="Base" DataType="BOOL" Usage="Output" Radix="Decimal" Required="false" Visible="false" ExternalAccess="Read Only">
<Description>
<![CDATA[Enable Output - System Defined Parameter]]>
</Description>
</Parameter>
<Parameter Name="Inp_Enable" TagType="Base" DataType="BOOL" Usage="Input" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read/Write">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
<Parameter Name="Ref_Connection" TagType="Base" DataType="ST_MBTCP_ClientConnection" Usage="InOut" Required="true" Visible="true" Constant="false"/>
<Parameter Name="Ref_Transactions" TagType="Base" DataType="ST_MBTCP_ClientTransaction" Dimensions="1" Usage="InOut" Required="true" Visible="true" Constant="false"/>
<Parameter Name="Ref_MBData" TagType="Base" DataType="ST_MBTCP_ClientData" Usage="InOut" Required="true" Visible="true" Constant="false"/>
<Parameter Name="Ref_MsgCreate" TagType="Base" DataType="MESSAGE" Usage="InOut" Required="true" Visible="true"/>
<Parameter Name="Ref_MsgConnect" TagType="Base" DataType="MESSAGE" Usage="InOut" Required="true" Visible="true"/>
<Parameter Name="Ref_MsgRead" TagType="Base" DataType="MESSAGE" Usage="InOut" Required="true" Visible="true"/>
<Parameter Name="Ref_MsgWrite" TagType="Base" DataType="MESSAGE" Usage="InOut" Required="true" Visible="true"/>
<Parameter Name="Ref_MsgDelete" TagType="Base" DataType="MESSAGE" Usage="InOut" Required="true" Visible="true"/>
<Parameter Name="Ref_MsgSetAttrSingle" TagType="Base" DataType="MESSAGE" Usage="InOut" Required="true" Visible="true"/>
<Parameter Name="Cfg_RetryInterval" TagType="Base" DataType="DINT" Usage="Input" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<DefaultData Format="L5K">
<![CDATA[1000]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="1000"/>
</DefaultData>
</Parameter>
<Parameter Name="Sts_Enabled" TagType="Base" DataType="BOOL" Usage="Output" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
<Parameter Name="Sts_Connected" TagType="Base" DataType="BOOL" Usage="Output" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
<Parameter Name="Sts_Fault" TagType="Base" DataType="BOOL" Usage="Output" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
<Parameter Name="Sts_Overlap" TagType="Base" DataType="BOOL" Usage="Output" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
<Parameter Name="Sts_Overload" TagType="Base" DataType="BOOL" Usage="Output" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
<Parameter Name="Val_Result" TagType="Base" DataType="DINT" Usage="Output" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<Description>
<![CDATA[0: Good, -6: Connection failed, -7: Delete all failed, -8: Create failed, -9: Connection failed, -10: Connection dropped, -11: Error in setting socket parameter, -12: Disabled.]]>
</Description>
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
<Parameter Name="Val_Instance" TagType="Base" DataType="DINT" Usage="Output" Radix="Decimal" Required="false" Visible="true" ExternalAccess="Read Only">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</Parameter>
</Parameters>
<LocalTags>
<LocalTag Name="Seq" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="CreateParams" DataType="ST_MBTCP_CreateParams" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,0,0,0]]]>
</DefaultData>
<DefaultData Format="Decorated">
<Structure DataType="ST_MBTCP_CreateParams">
<DataValueMember Name="Type" DataType="DINT" Radix="Decimal" Value="0"/>
<DataValueMember Name="Family" DataType="INT" Radix="Decimal" Value="0"/>
<DataValueMember Name="Port" DataType="INT" Radix="Decimal" Value="0"/>
<DataValueMember Name="Address" DataType="DINT" Radix="Decimal" Value="0"/>
</Structure>
</DefaultData>
</LocalTag>
<LocalTag Name="Instance" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="ConnParams" DataType="ST_MBTCP_ConnectParams" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,[0,'$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00']]]]>
</DefaultData>
<DefaultData Format="Decorated">
<Structure DataType="ST_MBTCP_ConnectParams">
<DataValueMember Name="Timeout" DataType="DINT" Radix="Decimal" Value="0"/>
<StructureMember Name="DestAddress" DataType="STR_32">
<DataValueMember Name="LEN" DataType="DINT" Radix="Decimal" Value="0"/>
<DataValueMember Name="DATA" DataType="STR_32" Radix="ASCII">
<![CDATA[]]>
</DataValueMember>
</StructureMember>
</Structure>
</DefaultData>
</LocalTag>
<LocalTag Name="PortStr" DataType="STR_8" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[6,'?port=$00$00']]]>
</DefaultData>
<DefaultData Format="String" Length="6">
<![CDATA['?port=']]>
</DefaultData>
</LocalTag>
<LocalTag Name="Str16" DataType="STR_16" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,'$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00']]]>
</DefaultData>
<DefaultData Format="String" Length="0">
<![CDATA['']]>
</DefaultData>
</LocalTag>
<LocalTag Name="MsgReadSrc" DataType="DINT" Dimensions="2" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,0]]]>
</DefaultData>
<DefaultData Format="Decorated">
<Array DataType="DINT" Dimensions="2" Radix="Decimal">
<Element Index="[0]" Value="0"/>
<Element Index="[1]" Value="0"/>
</Array>
</DefaultData>
</LocalTag>
<LocalTag Name="Str462" DataType="STR_462" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,'$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00']]]>
</DefaultData>
<DefaultData Format="String" Length="0">
<![CDATA['']]>
</DefaultData>
</LocalTag>
<LocalTag Name="Buffer" DataType="STR_4096" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,'$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00']]]>
</DefaultData>
<DefaultData Format="String" Length="0">
<![CDATA['']]>
</DefaultData>
</LocalTag>
<LocalTag Name="WriteIndex" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="TransTrig" DataType="BOOL" Dimensions="32" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0]]]>
</DefaultData>
<DefaultData Format="Decorated">
<Array DataType="BOOL" Dimensions="32" Radix="Decimal">
<Element Index="[0]" Value="0"/>
<Element Index="[1]" Value="0"/>
<Element Index="[2]" Value="0"/>
<Element Index="[3]" Value="0"/>
<Element Index="[4]" Value="0"/>
<Element Index="[5]" Value="0"/>
<Element Index="[6]" Value="0"/>
<Element Index="[7]" Value="0"/>
<Element Index="[8]" Value="0"/>
<Element Index="[9]" Value="0"/>
<Element Index="[10]" Value="0"/>
<Element Index="[11]" Value="0"/>
<Element Index="[12]" Value="0"/>
<Element Index="[13]" Value="0"/>
<Element Index="[14]" Value="0"/>
<Element Index="[15]" Value="0"/>
<Element Index="[16]" Value="0"/>
<Element Index="[17]" Value="0"/>
<Element Index="[18]" Value="0"/>
<Element Index="[19]" Value="0"/>
<Element Index="[20]" Value="0"/>
<Element Index="[21]" Value="0"/>
<Element Index="[22]" Value="0"/>
<Element Index="[23]" Value="0"/>
<Element Index="[24]" Value="0"/>
<Element Index="[25]" Value="0"/>
<Element Index="[26]" Value="0"/>
<Element Index="[27]" Value="0"/>
<Element Index="[28]" Value="0"/>
<Element Index="[29]" Value="0"/>
<Element Index="[30]" Value="0"/>
<Element Index="[31]" Value="0"/>
</Array>
</DefaultData>
</LocalTag>
<LocalTag Name="IDCount" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="WriteNow" DataType="BOOL" Dimensions="32" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0,2#0]]]>
</DefaultData>
<DefaultData Format="Decorated">
<Array DataType="BOOL" Dimensions="32" Radix="Decimal">
<Element Index="[0]" Value="0"/>
<Element Index="[1]" Value="0"/>
<Element Index="[2]" Value="0"/>
<Element Index="[3]" Value="0"/>
<Element Index="[4]" Value="0"/>
<Element Index="[5]" Value="0"/>
<Element Index="[6]" Value="0"/>
<Element Index="[7]" Value="0"/>
<Element Index="[8]" Value="0"/>
<Element Index="[9]" Value="0"/>
<Element Index="[10]" Value="0"/>
<Element Index="[11]" Value="0"/>
<Element Index="[12]" Value="0"/>
<Element Index="[13]" Value="0"/>
<Element Index="[14]" Value="0"/>
<Element Index="[15]" Value="0"/>
<Element Index="[16]" Value="0"/>
<Element Index="[17]" Value="0"/>
<Element Index="[18]" Value="0"/>
<Element Index="[19]" Value="0"/>
<Element Index="[20]" Value="0"/>
<Element Index="[21]" Value="0"/>
<Element Index="[22]" Value="0"/>
<Element Index="[23]" Value="0"/>
<Element Index="[24]" Value="0"/>
<Element Index="[25]" Value="0"/>
<Element Index="[26]" Value="0"/>
<Element Index="[27]" Value="0"/>
<Element Index="[28]" Value="0"/>
<Element Index="[29]" Value="0"/>
<Element Index="[30]" Value="0"/>
<Element Index="[31]" Value="0"/>
</Array>
</DefaultData>
</LocalTag>
<LocalTag Name="DINT" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="AddlLen" DataType="INT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="INT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="AddlReadLen" DataType="INT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="INT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="MBTransID" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="INT" DataType="INT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="INT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="AddlLen1" DataType="INT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="INT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="MBCmdLen" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="INT2" DataType="INT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="INT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="CWRCount" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="CWROffset" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="MBPacket" DataType="STR_462" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,'$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00']]]>
</DefaultData>
<DefaultData Format="String" Length="0">
<![CDATA['']]>
</DefaultData>
</LocalTag>
<LocalTag Name="DataReceived" DataType="BOOL" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="CmdFromPacket" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="MBID" DataType="STR_8" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,'$00$00$00$00$00$00$00$00']]]>
</DefaultData>
<DefaultData Format="String" Length="0">
<![CDATA['']]>
</DefaultData>
</LocalTag>
<LocalTag Name="MBUnit" DataType="STR_8" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,'$00$00$00$00$00$00$00$00']]]>
</DefaultData>
<DefaultData Format="String" Length="0">
<![CDATA['']]>
</DefaultData>
</LocalTag>
<LocalTag Name="MBBytes" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="MBCmdStr" DataType="STR_462" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,'$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00']]]>
</DefaultData>
<DefaultData Format="String" Length="0">
<![CDATA['']]>
</DefaultData>
</LocalTag>
<LocalTag Name="Index" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="ArraySize" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="Octets" DataType="DINT" Dimensions="4" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,0,0,0]]]>
</DefaultData>
<DefaultData Format="Decorated">
<Array DataType="DINT" Dimensions="4" Radix="Decimal">
<Element Index="[0]" Value="0"/>
<Element Index="[1]" Value="0"/>
<Element Index="[2]" Value="0"/>
<Element Index="[3]" Value="0"/>
</Array>
</DefaultData>
</LocalTag>
<LocalTag Name="StrOctet" DataType="STR_8" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,'$00$00$00$00$00$00$00$00']]]>
</DefaultData>
<DefaultData Format="String" Length="0">
<![CDATA['']]>
</DefaultData>
</LocalTag>
<LocalTag Name="StrOctetLen" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="IPStr" DataType="STR_16" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,'$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00$00']]]>
</DefaultData>
<DefaultData Format="String" Length="0">
<![CDATA['']]>
</DefaultData>
</LocalTag>
<LocalTag Name="CmdLast" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="StepTimer" DataType="FBD_TIMER" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[1,0,0,0,0,0,0,0,0,4,0,0]]]>
</DefaultData>
<DefaultData Format="Decorated">
<Structure DataType="FBD_TIMER">
<DataValueMember Name="EnableIn" DataType="BOOL" Value="1"/>
<DataValueMember Name="TimerEnable" DataType="BOOL" Value="0"/>
<DataValueMember Name="PRE" DataType="DINT" Radix="Decimal" Value="0"/>
<DataValueMember Name="Reset" DataType="BOOL" Value="0"/>
<DataValueMember Name="EnableOut" DataType="BOOL" Value="0"/>
<DataValueMember Name="ACC" DataType="DINT" Radix="Decimal" Value="0"/>
<DataValueMember Name="EN" DataType="BOOL" Value="0"/>
<DataValueMember Name="TT" DataType="BOOL" Value="0"/>
<DataValueMember Name="DN" DataType="BOOL" Value="0"/>
<DataValueMember Name="Status" DataType="DINT" Radix="Hex" Value="16#0000_0000"/>
<DataValueMember Name="InstructFault" DataType="BOOL" Value="0"/>
<DataValueMember Name="PresetInv" DataType="BOOL" Value="0"/>
</Structure>
</DefaultData>
</LocalTag>
<LocalTag Name="BufferSize" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[4096]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="4096"/>
</DefaultData>
</LocalTag>
<LocalTag Name="SINT" DataType="SINT" Dimensions="4" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[0,0,0,0]]]>
</DefaultData>
<DefaultData Format="Decorated">
<Array DataType="SINT" Dimensions="4" Radix="Decimal">
<Element Index="[0]" Value="0"/>
<Element Index="[1]" Value="0"/>
<Element Index="[2]" Value="0"/>
<Element Index="[3]" Value="0"/>
</Array>
</DefaultData>
</LocalTag>
<LocalTag Name="Enabled" DataType="BOOL" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="Connected" DataType="BOOL" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="Fault" DataType="BOOL" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="Result" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="StrPos" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="BufferByteIndex" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="BufferBitIndex" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="TransFound" DataType="BOOL" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="TransPtr" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="BRSError" DataType="BOOL" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="Bit" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="Byte" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="LastAddr" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="DINT2" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="Overlap" DataType="BOOL" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="Overload" DataType="BOOL" Radix="Decimal" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="BOOL" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
<LocalTag Name="PGRetry" DataType="AO_RTC_PulseGen" ExternalAccess="None">
<DefaultData Format="L5K">
<![CDATA[[1,1000,0,0]]]>
</DefaultData>
<DefaultData Format="Decorated">
<Structure DataType="AO_RTC_PulseGen">
<DataValueMember Name="EnableIn" DataType="BOOL" Value="1"/>
<DataValueMember Name="EnableOut" DataType="BOOL" Value="0"/>
<DataValueMember Name="Inp_Enable" DataType="BOOL" Value="0"/>
<DataValueMember Name="Inp_Interval" DataType="DINT" Radix="Decimal" Value="1000"/>
<DataValueMember Name="Sts_Enabled" DataType="BOOL" Value="0"/>
<DataValueMember Name="Out" DataType="BOOL" Value="0"/>
</Structure>
</DefaultData>
</LocalTag>
<LocalTag Name="MsgFlags" DataType="DINT" Radix="Decimal" ExternalAccess="None">
<Comments>
<Comment Operand=".0">
<![CDATA[Create]]>
</Comment>
<Comment Operand=".1">
<![CDATA[Set Attribute Single]]>
</Comment>
<Comment Operand=".2">
<![CDATA[Connect]]>
</Comment>
<Comment Operand=".3">
<![CDATA[Read]]>
</Comment>
<Comment Operand=".4">
<![CDATA[Write]]>
</Comment>
<Comment Operand=".5">
<![CDATA[Delete]]>
</Comment>
</Comments>
<DefaultData Format="L5K">
<![CDATA[0]]>
</DefaultData>
<DefaultData Format="Decorated">
<DataValue DataType="DINT" Radix="Decimal" Value="0"/>
</DefaultData>
</LocalTag>
</LocalTags>
<Routines>
<Routine Name="Logic" Type="ST">
<STContent>
<Line Number="0">
<![CDATA[]]>
</Line>
<Line Number="1">
<![CDATA[/*]]>
</Line>
<Line Number="2">
<![CDATA[	AO_MBTCP_Client]]>
</Line>
<Line Number="3">
<![CDATA[*/]]>
</Line>
<Line Number="4">
<![CDATA[]]>
</Line>
<Line Number="5">
<![CDATA[SIZE(Ref_Transactions, 0, ArraySize);]]>
</Line>
<Line Number="6">
<![CDATA[]]>
</Line>
<Line Number="7">
<![CDATA[if (Cfg_RetryInterval < 100 OR 5000 < Cfg_RetryInterval) then]]>
</Line>
<Line Number="8">
<![CDATA[	Cfg_RetryInterval := 1000;]]>
</Line>
<Line Number="9">
<![CDATA[end_if;]]>
</Line>
<Line Number="10">
<![CDATA[]]>
</Line>
<Line Number="11">
<![CDATA[PGRetry.Inp_Interval := Cfg_RetryInterval;]]>
</Line>
<Line Number="12">
<![CDATA[PGRetry.Inp_Enable := (Seq = 0);]]>
</Line>
<Line Number="13">
<![CDATA[AO_RTC_PulseGen(PGRetry);]]>
</Line>
<Line Number="14">
<![CDATA[]]>
</Line>
<Line Number="15">
<![CDATA[/*]]>
</Line>
<Line Number="16">
<![CDATA[	Parse local IP string (necessary for a 5380/5480 operating in Dual-IP mode).]]>
</Line>
<Line Number="17">
<![CDATA[*/]]>
</Line>
<Line Number="18">
<![CDATA[if (PGRetry.Out) then]]>
</Line>
<Line Number="19">
<![CDATA[	SIZE(Buffer.DATA, 0, BufferSize);]]>
</Line>
<Line Number="20">
<![CDATA[	Buffer.LEN := 0;]]>
</Line>
<Line Number="21">
<![CDATA[	COP(Buffer.LEN, Buffer.DATA[0], BufferSize);]]>
</Line>
<Line Number="22">
<![CDATA[	CreateParams.Type := 1;]]>
</Line>
<Line Number="23">
<![CDATA[	CreateParams.Family := 2;]]>
</Line>
<Line Number="24">
<![CDATA[	CreateParams.Port := 0;]]>
</Line>
<Line Number="25">
<![CDATA[	COP(Ref_Connection.LocalAddress, IPStr, 1);]]>
</Line>
<Line Number="26">
<![CDATA[	DINT := 0;]]>
</Line>
<Line Number="27">
<![CDATA[	COP(DINT, Octets[0], 4);]]>
</Line>
<Line Number="28">
<![CDATA[	Seq := 21;]]>
</Line>
<Line Number="29">
<![CDATA[	]]>
</Line>
<Line Number="30">
<![CDATA[	if (IPStr.LEN < 7) then]]>
</Line>
<Line Number="31">
<![CDATA[		CreateParams.Address := 0;]]>
</Line>
<Line Number="32">
<![CDATA[		Seq := 30;]]>
</Line>
<Line Number="33">
<![CDATA[	end_if;]]>
</Line>
<Line Number="34">
<![CDATA[	]]>
</Line>
<Line Number="35">
<![CDATA[	// Parse first IP octet.]]>
</Line>
<Line Number="36">
<![CDATA[	if (Seq = 21) then]]>
</Line>
<Line Number="37">
<![CDATA[		STOD(IPStr, Octets[3]);]]>
</Line>
<Line Number="38">
<![CDATA[		DTOS(Octets[3], StrOctet);]]>
</Line>
<Line Number="39">
<![CDATA[		StrOctetLen := StrOctet.LEN + 1;]]>
</Line>
<Line Number="40">
<![CDATA[		]]>
</Line>
<Line Number="41">
<![CDATA[		if (IPStr.LEN <= StrOctetLen) then]]>
</Line>
<Line Number="42">
<![CDATA[			CreateParams.Address := 0;]]>
</Line>
<Line Number="43">
<![CDATA[			Seq := 30;]]>
</Line>
<Line Number="44">
<![CDATA[		else]]>
</Line>
<Line Number="45">
<![CDATA[			DELETE(IPStr, StrOctetLen, 1, IPStr);]]>
</Line>
<Line Number="46">
<![CDATA[			Seq := 22;]]>
</Line>
<Line Number="47">
<![CDATA[		end_if;]]>
</Line>
<Line Number="48">
<![CDATA[	end_if;]]>
</Line>
<Line Number="49">
<![CDATA[	]]>
</Line>
<Line Number="50">
<![CDATA[	// Parse second IP octet.]]>
</Line>
<Line Number="51">
<![CDATA[	if (Seq = 22) then]]>
</Line>
<Line Number="52">
<![CDATA[		STOD(IPStr, Octets[2]);]]>
</Line>
<Line Number="53">
<![CDATA[		DTOS(Octets[2], StrOctet);]]>
</Line>
<Line Number="54">
<![CDATA[		StrOctetLen := StrOctet.LEN + 1;]]>
</Line>
<Line Number="55">
<![CDATA[		]]>
</Line>
<Line Number="56">
<![CDATA[		if (IPStr.LEN <= StrOctetLen) then]]>
</Line>
<Line Number="57">
<![CDATA[			CreateParams.Address := 0;]]>
</Line>
<Line Number="58">
<![CDATA[			Seq := 30;]]>
</Line>
<Line Number="59">
<![CDATA[		else]]>
</Line>
<Line Number="60">
<![CDATA[			DELETE(IPStr, StrOctetLen, 1, IPStr);]]>
</Line>
<Line Number="61">
<![CDATA[			Seq := 23;]]>
</Line>
<Line Number="62">
<![CDATA[		end_if;]]>
</Line>
<Line Number="63">
<![CDATA[	end_if;]]>
</Line>
<Line Number="64">
<![CDATA[	]]>
</Line>
<Line Number="65">
<![CDATA[	// Parse third & fourth IP octets and create hex address.]]>
</Line>
<Line Number="66">
<![CDATA[	if (Seq = 23) then]]>
</Line>
<Line Number="67">
<![CDATA[		Seq := 30;]]>
</Line>
<Line Number="68">
<![CDATA[		STOD(IPStr, Octets[1]);]]>
</Line>
<Line Number="69">
<![CDATA[		DTOS(Octets[1], StrOctet);]]>
</Line>
<Line Number="70">
<![CDATA[		StrOctetLen := StrOctet.LEN + 1;]]>
</Line>
<Line Number="71">
<![CDATA[		]]>
</Line>
<Line Number="72">
<![CDATA[		if (IPStr.LEN <= StrOctetLen) then]]>
</Line>
<Line Number="73">
<![CDATA[			CreateParams.Address := 0;]]>
</Line>
<Line Number="74">
<![CDATA[		else]]>
</Line>
<Line Number="75">
<![CDATA[			DELETE(IPStr, StrOctetLen, 1, IPStr);]]>
</Line>
<Line Number="76">
<![CDATA[			STOD(IPStr, Octets[0]);]]>
</Line>
<Line Number="77">
<![CDATA[			SINT[0] := Octets[0];]]>
</Line>
<Line Number="78">
<![CDATA[			SINT[1] := Octets[1];]]>
</Line>
<Line Number="79">
<![CDATA[			SINT[2] := Octets[2];]]>
</Line>
<Line Number="80">
<![CDATA[			SINT[3] := Octets[3];]]>
</Line>
<Line Number="81">
<![CDATA[			COP(SINT[0], CreateParams.Address, 1);]]>
</Line>
<Line Number="82">
<![CDATA[		end_if;]]>
</Line>
<Line Number="83">
<![CDATA[	end_if;]]>
</Line>
<Line Number="84">
<![CDATA[end_if;]]>
</Line>
<Line Number="85">
<![CDATA[]]>
</Line>
<Line Number="86">
<![CDATA[/*]]>
</Line>
<Line Number="87">
<![CDATA[	Create socket with path for messages to the local module.]]>
</Line>
<Line Number="88">
<![CDATA[*/]]>
</Line>
<Line Number="89">
<![CDATA[if (Seq = 30) then]]>
</Line>
<Line Number="90">
<![CDATA[	ConnParams.Timeout := 5000;]]>
</Line>
<Line Number="91">
<![CDATA[	CONCAT(Ref_Connection.DestAddress, PortStr, ConnParams.DestAddress);]]>
</Line>
<Line Number="92">
<![CDATA[	DTOS(Ref_Connection.DestPort, Str16);]]>
</Line>
<Line Number="93">
<![CDATA[	CONCAT(ConnParams.DestAddress, Str16, ConnParams.DestAddress);]]>
</Line>
<Line Number="94">
<![CDATA[	Ref_MsgCreate.Path.DATA[0] := 1;]]>
</Line>
<Line Number="95">
<![CDATA[	Ref_MsgCreate.Path.DATA[1] := Ref_Connection.LocalSlot;]]>
</Line>
<Line Number="96">
<![CDATA[	Ref_MsgCreate.Path.LEN := 2;]]>
</Line>
<Line Number="97">
<![CDATA[	COP(Ref_MsgCreate.Path, Ref_MsgConnect.Path, 1);]]>
</Line>
<Line Number="98">
<![CDATA[	COP(Ref_MsgCreate.Path, Ref_MsgRead.Path, 1);]]>
</Line>
<Line Number="99">
<![CDATA[	COP(Ref_MsgCreate.Path, Ref_MsgWrite.Path, 1);]]>
</Line>
<Line Number="100">
<![CDATA[	COP(Ref_MsgCreate.Path, Ref_MsgDelete.Path, 1);]]>
</Line>
<Line Number="101">
<![CDATA[	COP(Ref_MsgCreate.Path, Ref_MsgSetAttrSingle.Path, 1);]]>
</Line>
<Line Number="102">
<![CDATA[	]]>
</Line>
<Line Number="103">
<![CDATA[	if (Inp_Enable) then]]>
</Line>
<Line Number="104">
<![CDATA[		Enabled := 1;]]>
</Line>
<Line Number="105">
<![CDATA[		Fault := 0;]]>
</Line>
<Line Number="106">
<![CDATA[		Instance := 0;]]>
</Line>
<Line Number="107">
<![CDATA[		COP(CreateParams, Ref_Connection.MsgSrc[0], 12);]]>
</Line>
<Line Number="108">
<![CDATA[		Ref_MsgCreate.REQ_LEN := 12;]]>
</Line>
<Line Number="109">
<![CDATA[		MsgFlags.0 := 1;]]>
</Line>
<Line Number="110">
<![CDATA[	else]]>
</Line>
<Line Number="111">
<![CDATA[		Seq := 800;]]>
</Line>
<Line Number="112">
<![CDATA[	end_if;]]>
</Line>
<Line Number="113">
<![CDATA[end_if;]]>
</Line>
<Line Number="114">
<![CDATA[]]>
</Line>
<Line Number="115">
<![CDATA[if (MsgFlags.0 & (Ref_MsgCreate.DN OR Ref_MsgCreate.ER OR NOT Ref_MsgCreate.EN)) then]]>
</Line>
<Line Number="116">
<![CDATA[	MSG(Ref_MsgCreate);]]>
</Line>
<Line Number="117">
<![CDATA[	MsgFlags.0 := 0;]]>
</Line>
<Line Number="118">
<![CDATA[	Seq := 100;]]>
</Line>
<Line Number="119">
<![CDATA[end_if;]]>
</Line>
<Line Number="120">
<![CDATA[]]>
</Line>
<Line Number="121">
<![CDATA[if (Seq = 100) then]]>
</Line>
<Line Number="122">
<![CDATA[	if (Ref_MsgCreate.DN) then]]>
</Line>
<Line Number="123">
<![CDATA[		COP(Ref_Connection.MsgDest[0], Instance, 1);]]>
</Line>
<Line Number="124">
<![CDATA[		Ref_Connection.MsgSrc[496] := 1;]]>
</Line>
<Line Number="125">
<![CDATA[		Ref_Connection.MsgSrc[497] := 0;]]>
</Line>
<Line Number="126">
<![CDATA[		Ref_Connection.MsgSrc[498] := 0;]]>
</Line>
<Line Number="127">
<![CDATA[		Ref_Connection.MsgSrc[499] := 0;]]>
</Line>
<Line Number="128">
<![CDATA[		Ref_MsgSetAttrSingle.Instance := Instance;]]>
</Line>
<Line Number="129">
<![CDATA[		Ref_MsgSetAttrSingle.Attribute := 10;]]>
</Line>
<Line Number="130">
<![CDATA[		MsgFlags.1 := 1;]]>
</Line>
<Line Number="131">
<![CDATA[	end_if;]]>
</Line>
<Line Number="132">
<![CDATA[	]]>
</Line>
<Line Number="133">
<![CDATA[	if (Ref_MsgCreate.ER) then]]>
</Line>
<Line Number="134">
<![CDATA[		Seq := 900;]]>
</Line>
<Line Number="135">
<![CDATA[		Fault := 1;]]>
</Line>
<Line Number="136">
<![CDATA[		Result := -8;]]>
</Line>
<Line Number="137">
<![CDATA[	end_if;]]>
</Line>
<Line Number="138">
<![CDATA[	]]>
</Line>
<Line Number="139">
<![CDATA[	if (NOT Inp_Enable) then]]>
</Line>
<Line Number="140">
<![CDATA[		Seq := 800;]]>
</Line>
<Line Number="141">
<![CDATA[	end_if;]]>
</Line>
<Line Number="142">
<![CDATA[end_if;]]>
</Line>
<Line Number="143">
<![CDATA[]]>
</Line>
<Line Number="144">
<![CDATA[if (MsgFlags.1 & (Ref_MsgSetAttrSingle.DN OR Ref_MsgSetAttrSingle.ER OR NOT Ref_MsgSetAttrSingle.EN)) then]]>
</Line>
<Line Number="145">
<![CDATA[	MSG(Ref_MsgSetAttrSingle);]]>
</Line>
<Line Number="146">
<![CDATA[	MsgFlags.1 := 0;]]>
</Line>
<Line Number="147">
<![CDATA[	Seq := 110;]]>
</Line>
<Line Number="148">
<![CDATA[end_if;]]>
</Line>
<Line Number="149">
<![CDATA[]]>
</Line>
<Line Number="150">
<![CDATA[if (Seq = 110) then]]>
</Line>
<Line Number="151">
<![CDATA[	if (Ref_MsgSetAttrSingle.DN OR Ref_MsgSetAttrSingle.ER) then]]>
</Line>
<Line Number="152">
<![CDATA[		if (Inp_Enable) then]]>
</Line>
<Line Number="153">
<![CDATA[			Ref_MsgConnect.Instance := Instance;]]>
</Line>
<Line Number="154">
<![CDATA[			Ref_MsgConnect.REQ_LEN := ConnParams.DestAddress.LEN + 8;]]>
</Line>
<Line Number="155">
<![CDATA[			COP(ConnParams, Ref_Connection.MsgSrc[0], Ref_MsgConnect.REQ_LEN);]]>
</Line>
<Line Number="156">
<![CDATA[			Ref_MsgConnect.UnconnectedTimeout := 10000000;]]>
</Line>
<Line Number="157">
<![CDATA[			MsgFlags.2 := 1;]]>
</Line>
<Line Number="158">
<![CDATA[		else]]>
</Line>
<Line Number="159">
<![CDATA[			Seq := 800;]]>
</Line>
<Line Number="160">
<![CDATA[		end_if;]]>
</Line>
<Line Number="161">
<![CDATA[	end_if;]]>
</Line>
<Line Number="162">
<![CDATA[end_if;]]>
</Line>
<Line Number="163">
<![CDATA[]]>
</Line>
<Line Number="164">
<![CDATA[if (MsgFlags.2 & (Ref_MsgConnect.DN OR Ref_MsgConnect.ER OR NOT Ref_MsgConnect.EN)) then]]>
</Line>
<Line Number="165">
<![CDATA[	MSG(Ref_MsgConnect);]]>
</Line>
<Line Number="166">
<![CDATA[	MsgFlags.2 := 0;]]>
</Line>
<Line Number="167">
<![CDATA[	Seq := 200;]]>
</Line>
<Line Number="168">
<![CDATA[end_if;]]>
</Line>
<Line Number="169">
<![CDATA[]]>
</Line>
<Line Number="170">
<![CDATA[if (Seq = 200) then]]>
</Line>
<Line Number="171">
<![CDATA[	if (Ref_MsgConnect.DN) then]]>
</Line>
<Line Number="172">
<![CDATA[		Seq := 300;]]>
</Line>
<Line Number="173">
<![CDATA[		Result := 0;]]>
</Line>
<Line Number="174">
<![CDATA[		Connected := 1;]]>
</Line>
<Line Number="175">
<![CDATA[		Index := 0;]]>
</Line>
<Line Number="176">
<![CDATA[		]]>
</Line>
<Line Number="177">
<![CDATA[		while (Index < ArraySize) do]]>
</Line>
<Line Number="178">
<![CDATA[			Ref_Transactions[Index].Diag.RequestBuilt := 0;]]>
</Line>
<Line Number="179">
<![CDATA[			Ref_Transactions[Index].Diag.Overload := 0;]]>
</Line>
<Line Number="180">
<![CDATA[			Ref_Transactions[Index].Diag.Overlap := 0;]]>
</Line>
<Line Number="181">
<![CDATA[			Index := Index + 1;]]>
</Line>
<Line Number="182">
<![CDATA[		end_while;]]>
</Line>
<Line Number="183">
<![CDATA[	end_if;]]>
</Line>
<Line Number="184">
<![CDATA[	]]>
</Line>
<Line Number="185">
<![CDATA[	if (Ref_MsgConnect.ER) then]]>
</Line>
<Line Number="186">
<![CDATA[		Seq := 900;]]>
</Line>
<Line Number="187">
<![CDATA[		Fault := 1;]]>
</Line>
<Line Number="188">
<![CDATA[		Result := -9;]]>
</Line>
<Line Number="189">
<![CDATA[	end_if;]]>
</Line>
<Line Number="190">
<![CDATA[end_if;]]>
</Line>
<Line Number="191">
<![CDATA[]]>
</Line>
<Line Number="192">
<![CDATA[/*]]>
</Line>
<Line Number="193">
<![CDATA[	Triggers (3xx)]]>
</Line>
<Line Number="194">
<![CDATA[	Writes (4xx)]]>
</Line>
<Line Number="195">
<![CDATA[	Reads (5xx)]]>
</Line>
<Line Number="196">
<![CDATA[	Packet Processing (6xx)]]>
</Line>
<Line Number="197">
<![CDATA[*/]]>
</Line>
<Line Number="198">
<![CDATA[if (Seq = 300) then]]>
</Line>
<Line Number="199">
<![CDATA[	Seq := 310;]]>
</Line>
<Line Number="200">
<![CDATA[	Index := 0;]]>
</Line>
<Line Number="201">
<![CDATA[	]]>
</Line>
<Line Number="202">
<![CDATA[	if (NOT Inp_Enable) then]]>
</Line>
<Line Number="203">
<![CDATA[		Seq := 800;]]>
</Line>
<Line Number="204">
<![CDATA[	end_if;]]>
</Line>
<Line Number="205">
<![CDATA[end_if;]]>
</Line>
<Line Number="206">
<![CDATA[]]>
</Line>
<Line Number="207">
<![CDATA[if (Seq = 310) then]]>
</Line>
<Line Number="208">
<![CDATA[	Seq := 400;]]>
</Line>
<Line Number="209">
<![CDATA[	]]>
</Line>
<Line Number="210">
<![CDATA[	while (Index < ArraySize) do]]>
</Line>
<Line Number="211">
<![CDATA[		if (Ref_Transactions[Index].Enabled) then]]>
</Line>
<Line Number="212">
<![CDATA[			TransTrig[Index] := 0;]]>
</Line>
<Line Number="213">
<![CDATA[			]]>
</Line>
<Line Number="214">
<![CDATA[			if (Ref_Transactions[Index].Diag.IntervalTimer.DN) then]]>
</Line>
<Line Number="215">
<![CDATA[				Ref_Transactions[Index].Diag.IntervalTimer.Reset := 1;]]>
</Line>
<Line Number="216">
<![CDATA[			]]>
</Line>
<Line Number="217">
<![CDATA[				if (NOT Ref_Transactions[Index].Diag.RequestBuilt) then]]>
</Line>
<Line Number="218">
<![CDATA[					TransTrig[Index] := 1;]]>
</Line>
<Line Number="219">
<![CDATA[					Ref_Transactions[Index].Diag.Overlap := 0;]]>
</Line>
<Line Number="220">
<![CDATA[				else]]>
</Line>
<Line Number="221">
<![CDATA[					Ref_Transactions[Index].Diag.Overlap := 1;]]>
</Line>
<Line Number="222">
<![CDATA[				end_if;]]>
</Line>
<Line Number="223">
<![CDATA[			end_if;]]>
</Line>
<Line Number="224">
<![CDATA[		else]]>
</Line>
<Line Number="225">
<![CDATA[			Ref_Transactions[Index].Diag.RequestBuilt := 0;]]>
</Line>
<Line Number="226">
<![CDATA[			Ref_Transactions[Index].Diag.Overload := 0;]]>
</Line>
<Line Number="227">
<![CDATA[			Ref_Transactions[Index].Diag.Overlap := 0;]]>
</Line>
<Line Number="228">
<![CDATA[		end_if;]]>
</Line>
<Line Number="229">
<![CDATA[		]]>
</Line>
<Line Number="230">
<![CDATA[		Index := Index + 1;]]>
</Line>
<Line Number="231">
<![CDATA[	end_while;]]>
</Line>
<Line Number="232">
<![CDATA[end_if;]]>
</Line>
<Line Number="233">
<![CDATA[]]>
</Line>
<Line Number="234">
<![CDATA[/*]]>
</Line>
<Line Number="235">
<![CDATA[	Write section. Rebuild the request string if the RequestBuilt flag is cleared.]]>
</Line>
<Line Number="236">
<![CDATA[*/]]>
</Line>
<Line Number="237">
<![CDATA[if (Seq = 400) then]]>
</Line>
<Line Number="238">
<![CDATA[	WriteIndex := 0;]]>
</Line>
<Line Number="239">
<![CDATA[	Seq := 410;]]>
</Line>
<Line Number="240">
<![CDATA[end_if;]]>
</Line>
<Line Number="241">
<![CDATA[]]>
</Line>
<Line Number="242">
<![CDATA[if (Seq = 410) then]]>
</Line>
<Line Number="243">
<![CDATA[	if (TransTrig[WriteIndex]) then]]>
</Line>
<Line Number="244">
<![CDATA[		BRSError := 0;]]>
</Line>
<Line Number="245">
<![CDATA[		]]>
</Line>
<Line Number="246">
<![CDATA[		// Check to see if the transaction type is valid.]]>
</Line>
<Line Number="247">
<![CDATA[		if (1 <= Ref_Transactions[WriteIndex].Type & Ref_Transactions[WriteIndex].Type <= 6 OR ]]>
</Line>
<Line Number="248">
<![CDATA[			Ref_Transactions[WriteIndex].Type = 15 OR Ref_Transactions[WriteIndex].Type = 16) then]]>
</Line>
<Line Number="249">
<![CDATA[			]]>
</Line>
<Line Number="250">
<![CDATA[			// For single-write operations, set transaction count to 1 for range checking.]]>
</Line>
<Line Number="251">
<![CDATA[			if (Ref_Transactions[WriteIndex].Type = 5 OR Ref_Transactions[WriteIndex].Type = 6) then]]>
</Line>
<Line Number="252">
<![CDATA[				Ref_Transactions[WriteIndex].Count := 1;]]>
</Line>
<Line Number="253">
<![CDATA[			end_if;]]>
</Line>
<Line Number="254">
<![CDATA[			]]>
</Line>
<Line Number="255">
<![CDATA[			// Check whether Discrete/Register operations will fit within local arrays.]]>
</Line>
<Line Number="256">
<![CDATA[			if (Ref_Transactions[WriteIndex].LocalAddress + Ref_Transactions[WriteIndex].Count <= 1024 & ]]>
</Line>
<Line Number="257">
<![CDATA[				0 <= Ref_Transactions[WriteIndex].LocalAddress & 0 <= Ref_Transactions[WriteIndex].Count) then]]>
</Line>
<Line Number="258">
<![CDATA[				]]>
</Line>
<Line Number="259">
<![CDATA[				// Build the MBAP Header (Transaction ID, Protocol ID (0), Length, Unit ID).]]>
</Line>
<Line Number="260">
<![CDATA[				SWPB(Ref_Transactions[WriteIndex].Diag.ID, REVERSE, INT);]]>
</Line>
<Line Number="261">
<![CDATA[				COP(INT, Ref_Transactions[WriteIndex].Diag.Request.DATA[0], 2);]]>
</Line>
<Line Number="262">
<![CDATA[				Ref_Transactions[WriteIndex].Diag.Request.DATA[2] := 0;]]>
</Line>
<Line Number="263">
<![CDATA[				Ref_Transactions[WriteIndex].Diag.Request.DATA[3] := 0;]]>
</Line>
<Line Number="264">
<![CDATA[				Ref_Transactions[WriteIndex].Diag.Request.LEN := 4;]]>
</Line>
<Line Number="265">
<![CDATA[				]]>
</Line>
<Line Number="266">
<![CDATA[				// Handle length 6 transactions (adds additional length to the header).]]>
</Line>
<Line Number="267">
<![CDATA[				if (1 <= Ref_Transactions[WriteIndex].Type & Ref_Transactions[WriteIndex].Type <= 6) then]]>
</Line>
<Line Number="268">
<![CDATA[					INT := 6;]]>
</Line>
<Line Number="269">
<![CDATA[					SWPB(INT, REVERSE, INT);]]>
</Line>
<Line Number="270">
<![CDATA[					COP(INT, Ref_Transactions[WriteIndex].Diag.Request.DATA[4], 2);]]>
</Line>
<Line Number="271">
<![CDATA[					Ref_Transactions[WriteIndex].Diag.Request.LEN := 6;]]>
</Line>
<Line Number="272">
<![CDATA[					]]>
</Line>
<Line Number="273">
<![CDATA[				elsif (Ref_Transactions[WriteIndex].Type = 15) then]]>
</Line>
<Line Number="274">
<![CDATA[					INT := Ref_Transactions[WriteIndex].Count / 8;]]>
</Line>
<Line Number="275">
<![CDATA[					]]>
</Line>
<Line Number="276">
<![CDATA[					if (INT * 8 <= Ref_Transactions[WriteIndex].Count) then]]>
</Line>
<Line Number="277">
<![CDATA[						if (INT * 8 < Ref_Transactions[WriteIndex].Count) then]]>
</Line>
<Line Number="278">
<![CDATA[							INT := INT + 1;]]>
</Line>
<Line Number="279">
<![CDATA[						end_if;]]>
</Line>
<Line Number="280">
<![CDATA[						]]>
</Line>
<Line Number="281">
<![CDATA[						INT := INT + 7;]]>
</Line>
<Line Number="282">
<![CDATA[						SWPB(INT, REVERSE, INT);]]>
</Line>
<Line Number="283">
<![CDATA[						COP(INT, Ref_Transactions[WriteIndex].Diag.Request.DATA[4], 2);]]>
</Line>
<Line Number="284">
<![CDATA[						Ref_Transactions[WriteIndex].Diag.Request.LEN := 6;]]>
</Line>
<Line Number="285">
<![CDATA[					end_if;]]>
</Line>
<Line Number="286">
<![CDATA[					]]>
</Line>
<Line Number="287">
<![CDATA[				elsif (Ref_Transactions[WriteIndex].Type = 16) then]]>
</Line>
<Line Number="288">
<![CDATA[					INT := (Ref_Transactions[WriteIndex].Count * 2) + 7;]]>
</Line>
<Line Number="289">
<![CDATA[					SWPB(INT, REVERSE, INT);]]>
</Line>
<Line Number="290">
<![CDATA[					COP(INT, Ref_Transactions[WriteIndex].Diag.Request.DATA[4], 2);]]>
</Line>
<Line Number="291">
<![CDATA[					Ref_Transactions[WriteIndex].Diag.Request.LEN := 6;]]>
</Line>
<Line Number="292">
<![CDATA[				end_if;]]>
</Line>
<Line Number="293">
<![CDATA[				]]>
</Line>
<Line Number="294">
<![CDATA[				// Add Unit ID to the header.]]>
</Line>
<Line Number="295">
<![CDATA[				COP(Ref_Transactions[WriteIndex].StationID, Ref_Transactions[WriteIndex].Diag.Request.DATA[6], 1);]]>
</Line>
<Line Number="296">
<![CDATA[				COP(Ref_Transactions[WriteIndex].Type, Ref_Transactions[WriteIndex].Diag.Request.DATA[7], 1);]]>
</Line>
<Line Number="297">
<![CDATA[				SWPB(Ref_Transactions[WriteIndex].BeginAddress, REVERSE, INT);]]>
</Line>
<Line Number="298">
<![CDATA[				COP(INT, Ref_Transactions[WriteIndex].Diag.Request.DATA[8], 2);]]>
</Line>
<Line Number="299">
<![CDATA[				Ref_Transactions[WriteIndex].Diag.Request.LEN := 10;]]>
</Line>
<Line Number="300">
<![CDATA[				]]>
</Line>
<Line Number="301">
<![CDATA[				// Add reference count for transactions requiring them.]]>
</Line>
<Line Number="302">
<![CDATA[				if (1 <= Ref_Transactions[WriteIndex].Type & Ref_Transactions[WriteIndex].Type <= 4 OR ]]>
</Line>
<Line Number="303">
<![CDATA[					Ref_Transactions[WriteIndex].Type = 15 OR Ref_Transactions[WriteIndex].Type = 16) then]]>
</Line>
<Line Number="304">
<![CDATA[					SWPB(Ref_Transactions[WriteIndex].Count, REVERSE, INT);]]>
</Line>
<Line Number="305">
<![CDATA[					DINT2 := Ref_Transactions[WriteIndex].Diag.Request.LEN;]]>
</Line>
<Line Number="306">
<![CDATA[					COP(INT, Ref_Transactions[WriteIndex].Diag.Request.DATA[DINT2], 2);]]>
</Line>
<Line Number="307">
<![CDATA[					Ref_Transactions[WriteIndex].Diag.Request.LEN := Ref_Transactions[WriteIndex].Diag.Request.LEN + 2;]]>
</Line>
<Line Number="308">
<![CDATA[				end_if;]]>
</Line>
<Line Number="309">
<![CDATA[				]]>
</Line>
<Line Number="310">
<![CDATA[				// Write Single Coil (0x0000 or 0xFF00).]]>
</Line>
<Line Number="311">
<![CDATA[				if (Ref_Transactions[WriteIndex].Type = 5) then]]>
</Line>
<Line Number="312">
<![CDATA[					DINT := Ref_Transactions[WriteIndex].LocalAddress; // tINT2 -> tDINT]]>
</Line>
<Line Number="313">
<![CDATA[					]]>
</Line>
<Line Number="314">
<![CDATA[					if (NOT Ref_MBData.Coils[DINT]) then // tINT2 -> tDINT]]>
</Line>
<Line Number="315">
<![CDATA[						INT := 16#0000;]]>
</Line>
<Line Number="316">
<![CDATA[					else]]>
</Line>
<Line Number="317">
<![CDATA[						INT := 16#00ff; // avoids need to byte-swap]]>
</Line>
<Line Number="318">
<![CDATA[					end_if;]]>
</Line>
<Line Number="319">
<![CDATA[					]]>
</Line>
<Line Number="320">
<![CDATA[					DINT2 := Ref_Transactions[WriteIndex].Diag.Request.LEN;]]>
</Line>
<Line Number="321">
<![CDATA[					COP(INT, Ref_Transactions[WriteIndex].Diag.Request.DATA[DINT2], 2);]]>
</Line>
<Line Number="322">
<![CDATA[					Ref_Transactions[WriteIndex].Diag.Request.LEN := Ref_Transactions[WriteIndex].Diag.Request.LEN + 2;]]>
</Line>
<Line Number="323">
<![CDATA[				end_if;]]>
</Line>
<Line Number="324">
<![CDATA[				]]>
</Line>
<Line Number="325">
<![CDATA[				// Write Single Register]]>
</Line>
<Line Number="326">
<![CDATA[				if (Ref_Transactions[WriteIndex].Type = 6) then]]>
</Line>
<Line Number="327">
<![CDATA[					DINT := Ref_Transactions[WriteIndex].LocalAddress; // tINT -> tDINT]]>
</Line>
<Line Number="328">
<![CDATA[					SWPB(Ref_MBData.HoldingRegisters[DINT], REVERSE, INT); // tINT -> tDINT]]>
</Line>
<Line Number="329">
<![CDATA[					DINT2 := Ref_Transactions[WriteIndex].Diag.Request.LEN;]]>
</Line>
<Line Number="330">
<![CDATA[					COP(INT, Ref_Transactions[WriteIndex].Diag.Request.DATA[DINT2], 2);]]>
</Line>
<Line Number="331">
<![CDATA[					Ref_Transactions[WriteIndex].Diag.Request.LEN := Ref_Transactions[WriteIndex].Diag.Request.LEN + 2;]]>
</Line>
<Line Number="332">
<![CDATA[				end_if;]]>
</Line>
<Line Number="333">
<![CDATA[				]]>
</Line>
<Line Number="334">
<![CDATA[				// Write Multiple Coils]]>
</Line>
<Line Number="335">
<![CDATA[				if (Ref_Transactions[WriteIndex].Type = 15) then]]>
</Line>
<Line Number="336">
<![CDATA[					DINT := Ref_Transactions[WriteIndex].Count / 8; // tINT -> tDINT]]>
</Line>
<Line Number="337">
<![CDATA[					]]>
</Line>
<Line Number="338">
<![CDATA[					if (DINT * 8 <> Ref_Transactions[WriteIndex].Count) then]]>
</Line>
<Line Number="339">
<![CDATA[						DINT := DINT + 1; // tINT -> tDINT]]>
</Line>
<Line Number="340">
<![CDATA[					end_if;]]>
</Line>
<Line Number="341">
<![CDATA[					]]>
</Line>
<Line Number="342">
<![CDATA[					DINT2 := Ref_Transactions[WriteIndex].Diag.Request.LEN;]]>
</Line>
<Line Number="343">
<![CDATA[					COP(DINT, Ref_Transactions[WriteIndex].Diag.Request.DATA[DINT2], 1); // tINT -> tDINT]]>
</Line>
<Line Number="344">
<![CDATA[					Ref_Transactions[WriteIndex].Diag.Request.LEN := Ref_Transactions[WriteIndex].Diag.Request.LEN + 1;]]>
</Line>
<Line Number="345">
<![CDATA[					Bit := 0;]]>
</Line>
<Line Number="346">
<![CDATA[					Byte := 0;]]>
</Line>
<Line Number="347">
<![CDATA[					Str462.LEN := DINT; // tINT -> tDINT]]>
</Line>
<Line Number="348">
<![CDATA[					Str462.DATA[0] := 0;]]>
</Line>
<Line Number="349">
<![CDATA[					Index := Ref_Transactions[WriteIndex].LocalAddress;]]>
</Line>
<Line Number="350">
<![CDATA[					LastAddr := Ref_Transactions[WriteIndex].Count - 1 + Ref_Transactions[WriteIndex].LocalAddress;]]>
</Line>
<Line Number="351">
<![CDATA[					]]>
</Line>
<Line Number="352">
<![CDATA[					while (Index < LastAddr) do]]>
</Line>
<Line Number="353">
<![CDATA[						Str462.DATA[Byte].[Bit] := Ref_MBData.Coils[Index];]]>
</Line>
<Line Number="354">
<![CDATA[						Bit := Bit + 1;]]>
</Line>
<Line Number="355">
<![CDATA[						]]>
</Line>
<Line Number="356">
<![CDATA[						if (Bit > 7) then]]>
</Line>
<Line Number="357">
<![CDATA[							Bit := 0;]]>
</Line>
<Line Number="358">
<![CDATA[							Byte := Byte + 1;]]>
</Line>
<Line Number="359">
<![CDATA[							Str462.DATA[Byte] := 0;]]>
</Line>
<Line Number="360">
<![CDATA[						end_if;]]>
</Line>
<Line Number="361">
<![CDATA[						]]>
</Line>
<Line Number="362">
<![CDATA[						Index := Index + 1;]]>
</Line>
<Line Number="363">
<![CDATA[					end_while;]]>
</Line>
<Line Number="364">
<![CDATA[					]]>
</Line>
<Line Number="365">
<![CDATA[					CONCAT(Ref_Transactions[WriteIndex].Diag.Request, Str462, Ref_Transactions[WriteIndex].Diag.Request);]]>
</Line>
<Line Number="366">
<![CDATA[				end_if;]]>
</Line>
<Line Number="367">
<![CDATA[				]]>
</Line>
<Line Number="368">
<![CDATA[				// Write Multiple Registers]]>
</Line>
<Line Number="369">
<![CDATA[				if (Ref_Transactions[WriteIndex].Type = 16) then]]>
</Line>
<Line Number="370">
<![CDATA[					DINT := Ref_Transactions[WriteIndex].Count * 2; // tINT -> tDINT]]>
</Line>
<Line Number="371">
<![CDATA[					DINT2 := Ref_Transactions[WriteIndex].Diag.Request.LEN;]]>
</Line>
<Line Number="372">
<![CDATA[					COP(DINT, Ref_Transactions[WriteIndex].Diag.Request.DATA[DINT2], 1); // tINT -> tDINT]]>
</Line>
<Line Number="373">
<![CDATA[					Ref_Transactions[WriteIndex].Diag.Request.LEN := Ref_Transactions[WriteIndex].Diag.Request.LEN + 1;]]>
</Line>
<Line Number="374">
<![CDATA[					Index := Ref_Transactions[WriteIndex].LocalAddress;]]>
</Line>
<Line Number="375">
<![CDATA[					LastAddr := Ref_Transactions[WriteIndex].Count - 1 + Ref_Transactions[WriteIndex].LocalAddress;]]>
</Line>
<Line Number="376">
<![CDATA[					]]>
</Line>
<Line Number="377">
<![CDATA[					while (Index < LastAddr) do]]>
</Line>
<Line Number="378">
<![CDATA[						SWPB(Ref_MBData.HoldingRegisters[Index], REVERSE, INT);]]>
</Line>
<Line Number="379">
<![CDATA[						DINT2 := Ref_Transactions[WriteIndex].Diag.Request.LEN;]]>
</Line>
<Line Number="380">
<![CDATA[						COP(INT, Ref_Transactions[WriteIndex].Diag.Request.DATA[DINT2], 2);]]>
</Line>
<Line Number="381">
<![CDATA[						Ref_Transactions[WriteIndex].Diag.Request.LEN := Ref_Transactions[WriteIndex].Diag.Request.LEN + 2;]]>
</Line>
<Line Number="382">
<![CDATA[						Index := Index + 1;]]>
</Line>
<Line Number="383">
<![CDATA[					end_while;]]>
</Line>
<Line Number="384">
<![CDATA[				end_if;]]>
</Line>
<Line Number="385">
<![CDATA[			else]]>
</Line>
<Line Number="386">
<![CDATA[				Ref_Transactions[WriteIndex].Diag.ErrorCode := -13;]]>
</Line>
<Line Number="387">
<![CDATA[				Ref_Transactions[WriteIndex].Status := -1;]]>
</Line>
<Line Number="388">
<![CDATA[				Ref_Transactions[WriteIndex].Enabled := 0;]]>
</Line>
<Line Number="389">
<![CDATA[				BRSError := 1;]]>
</Line>
<Line Number="390">
<![CDATA[			end_if;]]>
</Line>
<Line Number="391">
<![CDATA[		else]]>
</Line>
<Line Number="392">
<![CDATA[			Ref_Transactions[WriteIndex].Diag.ErrorCode := -12;]]>
</Line>
<Line Number="393">
<![CDATA[			Ref_Transactions[WriteIndex].Status := -1;]]>
</Line>
<Line Number="394">
<![CDATA[			Ref_Transactions[WriteIndex].Enabled := 0;]]>
</Line>
<Line Number="395">
<![CDATA[			BRSError := 1;]]>
</Line>
<Line Number="396">
<![CDATA[		end_if;]]>
</Line>
<Line Number="397">
<![CDATA[		]]>
</Line>
<Line Number="398">
<![CDATA[		if (NOT BRSError) then]]>
</Line>
<Line Number="399">
<![CDATA[			Ref_Transactions[WriteIndex].Diag.RequestBuilt := 1;]]>
</Line>
<Line Number="400">
<![CDATA[			Seq := 420;]]>
</Line>
<Line Number="401">
<![CDATA[		else]]>
</Line>
<Line Number="402">
<![CDATA[			Seq := 480;]]>
</Line>
<Line Number="403">
<![CDATA[		end_if;]]>
</Line>
<Line Number="404">
<![CDATA[	else]]>
</Line>
<Line Number="405">
<![CDATA[		Seq := 480;]]>
</Line>
<Line Number="406">
<![CDATA[	end_if;]]>
</Line>
<Line Number="407">
<![CDATA[end_if;]]>
</Line>
<Line Number="408">
<![CDATA[]]>
</Line>
<Line Number="409">
<![CDATA[if (Seq = 420) then]]>
</Line>
<Line Number="410">
<![CDATA[	if (Ref_Transactions[WriteIndex].Diag.RequestBuilt & TransTrig[WriteIndex]) then]]>
</Line>
<Line Number="411">
<![CDATA[		if (IDCount < 32767) then]]>
</Line>
<Line Number="412">
<![CDATA[			IDCount := IDCount + 1;]]>
</Line>
<Line Number="413">
<![CDATA[		else]]>
</Line>
<Line Number="414">
<![CDATA[			IDCount := 0;]]>
</Line>
<Line Number="415">
<![CDATA[		end_if;]]>
</Line>
<Line Number="416">
<![CDATA[		]]>
</Line>
<Line Number="417">
<![CDATA[		Ref_Transactions[WriteIndex].Diag.ID := IDCount;]]>
</Line>
<Line Number="418">
<![CDATA[		SWPB(Ref_Transactions[WriteIndex].Diag.ID, REVERSE, INT);]]>
</Line>
<Line Number="419">
<![CDATA[		COP(INT, Ref_Transactions[WriteIndex].Diag.Request.DATA[0], 2);]]>
</Line>
<Line Number="420">
<![CDATA[		WriteNow[WriteIndex] := 1;]]>
</Line>
<Line Number="421">
<![CDATA[		TransTrig[WriteIndex] := 0;]]>
</Line>
<Line Number="422">
<![CDATA[		Seq := 440;]]>
</Line>
<Line Number="423">
<![CDATA[		]]>
</Line>
<Line Number="424">
<![CDATA[		if (Ref_Transactions[WriteIndex].Complete) then]]>
</Line>
<Line Number="425">
<![CDATA[			Ref_Transactions[WriteIndex].Diag.NoReplyCount := 0;]]>
</Line>
<Line Number="426">
<![CDATA[		end_if;]]>
</Line>
<Line Number="427">
<![CDATA[	end_if;]]>
</Line>
<Line Number="428">
<![CDATA[end_if;]]>
</Line>
<Line Number="429">
<![CDATA[]]>
</Line>
<Line Number="430">
<![CDATA[/*]]>
</Line>
<Line Number="431">
<![CDATA[	Prepare to send the transaction.]]>
</Line>
<Line Number="432">
<![CDATA[*/]]>
</Line>
<Line Number="433">
<![CDATA[if (Seq = 440) then]]>
</Line>
<Line Number="434">
<![CDATA[	if (WriteNow[WriteIndex] & (Ref_MsgWrite.DN OR Ref_MsgWrite.ER OR NOT Ref_MsgWrite.EN) & (Ref_MsgRead.DN OR Ref_MsgRead.ER OR NOT Ref_MsgRead.EN)) then]]>
</Line>
<Line Number="435">
<![CDATA[		DINT := 20;]]>
</Line>
<Line Number="436">
<![CDATA[		COP(DINT, Ref_Connection.MsgSrc[0], 4);]]>
</Line>
<Line Number="437">
<![CDATA[		DINT := 0;]]>
</Line>
<Line Number="438">
<![CDATA[		COP(DINT, Ref_Connection.MsgSrc[4], 8);]]>
</Line>
<Line Number="439">
<![CDATA[		COP(Ref_Transactions[WriteIndex].Diag.Request.LEN, Ref_Connection.MsgSrc[12], 4);]]>
</Line>
<Line Number="440">
<![CDATA[		COP(Ref_Transactions[WriteIndex].Diag.Request.DATA[0], Ref_Connection.MsgSrc[16], Ref_Transactions[WriteIndex].Diag.Request.LEN);]]>
</Line>
<Line Number="441">
<![CDATA[		Ref_MsgWrite.REQ_LEN := Ref_Transactions[WriteIndex].Diag.Request.LEN + 16;]]>
</Line>
<Line Number="442">
<![CDATA[		]]>
</Line>
<Line Number="443">
<![CDATA[		if (Ref_Transactions[WriteIndex].Complete) then]]>
</Line>
<Line Number="444">
<![CDATA[			Ref_Transactions[WriteIndex].Status := 1;]]>
</Line>
<Line Number="445">
<![CDATA[		else]]>
</Line>
<Line Number="446">
<![CDATA[			Ref_Transactions[WriteIndex].Status := 2;]]>
</Line>
<Line Number="447">
<![CDATA[			Ref_Transactions[WriteIndex].Diag.NoReplyCount := Ref_Transactions[WriteIndex].Diag.NoReplyCount + 1;]]>
</Line>
<Line Number="448">
<![CDATA[		end_if;]]>
</Line>
<Line Number="449">
<![CDATA[		]]>
</Line>
<Line Number="450">
<![CDATA[		Ref_Transactions[WriteIndex].Complete := 0;]]>
</Line>
<Line Number="451">
<![CDATA[		WriteNow[WriteIndex] := 0;]]>
</Line>
<Line Number="452">
<![CDATA[		Ref_MsgWrite.Instance := Instance;]]>
</Line>
<Line Number="453">
<![CDATA[		Ref_MsgWrite.UnconnectedTimeout := 3000000;]]>
</Line>
<Line Number="454">
<![CDATA[		MsgFlags.4 := 1;]]>
</Line>
<Line Number="455">
<![CDATA[	end_if;]]>
</Line>
<Line Number="456">
<![CDATA[end_if;]]>
</Line>
<Line Number="457">
<![CDATA[]]>
</Line>
<Line Number="458">
<![CDATA[if (MsgFlags.4 & (Ref_MsgWrite.DN OR Ref_MsgWrite.ER OR NOT Ref_MsgWrite.EN)) then]]>
</Line>
<Line Number="459">
<![CDATA[	MSG(Ref_MsgWrite);]]>
</Line>
<Line Number="460">
<![CDATA[	MsgFlags.4 := 0;]]>
</Line>
<Line Number="461">
<![CDATA[	Seq := 450;]]>
</Line>
<Line Number="462">
<![CDATA[end_if;]]>
</Line>
<Line Number="463">
<![CDATA[]]>
</Line>
<Line Number="464">
<![CDATA[if (Seq = 450) then]]>
</Line>
<Line Number="465">
<![CDATA[	if (Ref_MsgWrite.DN) then]]>
</Line>
<Line Number="466">
<![CDATA[		Seq := 480;]]>
</Line>
<Line Number="467">
<![CDATA[	end_if;]]>
</Line>
<Line Number="468">
<![CDATA[	]]>
</Line>
<Line Number="469">
<![CDATA[	if (Ref_MsgWrite.ER) then]]>
</Line>
<Line Number="470">
<![CDATA[		Result := -2;]]>
</Line>
<Line Number="471">
<![CDATA[		Fault := 1;]]>
</Line>
<Line Number="472">
<![CDATA[		Seq := 900;]]>
</Line>
<Line Number="473">
<![CDATA[	end_if;]]>
</Line>
<Line Number="474">
<![CDATA[end_if;]]>
</Line>
<Line Number="475">
<![CDATA[]]>
</Line>
<Line Number="476">
<![CDATA[/*]]>
</Line>
<Line Number="477">
<![CDATA[	Write is done, repeat for all transactions.]]>
</Line>
<Line Number="478">
<![CDATA[*/]]>
</Line>
<Line Number="479">
<![CDATA[if (Seq = 480) then]]>
</Line>
<Line Number="480">
<![CDATA[	Seq := 500;]]>
</Line>
<Line Number="481">
<![CDATA[	]]>
</Line>
<Line Number="482">
<![CDATA[	if (WriteIndex < ArraySize - 1) then]]>
</Line>
<Line Number="483">
<![CDATA[		WriteIndex := WriteIndex + 1;]]>
</Line>
<Line Number="484">
<![CDATA[		Seq := 410;]]>
</Line>
<Line Number="485">
<![CDATA[	end_if;]]>
</Line>
<Line Number="486">
<![CDATA[end_if;]]>
</Line>
<Line Number="487">
<![CDATA[]]>
</Line>
<Line Number="488">
<![CDATA[/*]]>
</Line>
<Line Number="489">
<![CDATA[	Read section.]]>
</Line>
<Line Number="490">
<![CDATA[*/]]>
</Line>
<Line Number="491">
<![CDATA[if (Seq = 500) then]]>
</Line>
<Line Number="492">
<![CDATA[	MsgReadSrc[0] := 0;]]>
</Line>
<Line Number="493">
<![CDATA[	MsgReadSrc[1] := 484;]]>
</Line>
<Line Number="494">
<![CDATA[	COP(MsgReadSrc[0], Ref_Connection.MsgSrc[0], 8);]]>
</Line>
<Line Number="495">
<![CDATA[	Ref_MsgRead.REQ_LEN := 8;]]>
</Line>
<Line Number="496">
<![CDATA[	]]>
</Line>
<Line Number="497">
<![CDATA[	if ((Ref_MsgRead.DN OR Ref_MsgRead.ER OR NOT Ref_MsgRead.EN) & (Ref_MsgWrite.DN OR Ref_MsgWrite.ER OR NOT Ref_MsgWrite.EN)) then]]>
</Line>
<Line Number="498">
<![CDATA[		Ref_MsgRead.Instance := Instance;]]>
</Line>
<Line Number="499">
<![CDATA[		Ref_MsgRead.UnconnectedTimeout := 3000000;]]>
</Line>
<Line Number="500">
<![CDATA[		MsgFlags.3 := 1;]]>
</Line>
<Line Number="501">
<![CDATA[	end_if;]]>
</Line>
<Line Number="502">
<![CDATA[end_if;]]>
</Line>
<Line Number="503">
<![CDATA[]]>
</Line>
<Line Number="504">
<![CDATA[if (MsgFlags.3 & (Ref_MsgRead.DN OR Ref_MsgRead.ER OR NOT Ref_MsgRead.EN)) then]]>
</Line>
<Line Number="505">
<![CDATA[	MSG(Ref_MsgRead);]]>
</Line>
<Line Number="506">
<![CDATA[	MsgFlags.3 := 0;]]>
</Line>
<Line Number="507">
<![CDATA[	Seq := 510;]]>
</Line>
<Line Number="508">
<![CDATA[end_if;]]>
</Line>
<Line Number="509">
<![CDATA[]]>
</Line>
<Line Number="510">
<![CDATA[if (Seq = 510) then]]>
</Line>
<Line Number="511">
<![CDATA[	if (Ref_MsgRead.DN) then]]>
</Line>
<Line Number="512">
<![CDATA[		Seq := 600;]]>
</Line>
<Line Number="513">
<![CDATA[		COP(Ref_Connection.MsgDest[8], Str462.LEN, 1);]]>
</Line>
<Line Number="514">
<![CDATA[		]]>
</Line>
<Line Number="515">
<![CDATA[		if (Str462.LEN > 0) then]]>
</Line>
<Line Number="516">
<![CDATA[			COP(Ref_Connection.MsgDest[12], Str462.DATA[0], Str462.LEN);]]>
</Line>
<Line Number="517">
<![CDATA[			CONCAT(Buffer, Str462, Buffer);]]>
</Line>
<Line Number="518">
<![CDATA[		end_if;]]>
</Line>
<Line Number="519">
<![CDATA[	end_if;]]>
</Line>
<Line Number="520">
<![CDATA[	]]>
</Line>
<Line Number="521">
<![CDATA[	if (Ref_MsgRead.ER) then]]>
</Line>
<Line Number="522">
<![CDATA[		Seq := 900;]]>
</Line>
<Line Number="523">
<![CDATA[		Result := -4;]]>
</Line>
<Line Number="524">
<![CDATA[		Fault := 1;]]>
</Line>
<Line Number="525">
<![CDATA[	end_if;]]>
</Line>
<Line Number="526">
<![CDATA[end_if;]]>
</Line>
<Line Number="527">
<![CDATA[]]>
</Line>
<Line Number="528">
<![CDATA[/*]]>
</Line>
<Line Number="529">
<![CDATA[	Incoming packet processing. Check first 7 bytes (header). Bytes 4 and 5 contain additional packet length.]]>
</Line>
<Line Number="530">
<![CDATA[	If all bytes are received, the packet will be extracted from the buffer.]]>
</Line>
<Line Number="531">
<![CDATA[*/]]>
</Line>
<Line Number="532">
<![CDATA[if (Seq = 600) then]]>
</Line>
<Line Number="533">
<![CDATA[	Seq := 610;]]>
</Line>
<Line Number="534">
<![CDATA[	]]>
</Line>
<Line Number="535">
<![CDATA[	if (Buffer.LEN >= 7) then]]>
</Line>
<Line Number="536">
<![CDATA[		COP(Buffer.DATA[4], AddlLen, 1);]]>
</Line>
<Line Number="537">
<![CDATA[		SWPB(AddlLen, REVERSE, AddlLen1);]]>
</Line>
<Line Number="538">
<![CDATA[		AddlReadLen := AddlLen1 + 6;]]>
</Line>
<Line Number="539">
<![CDATA[		]]>
</Line>
<Line Number="540">
<![CDATA[		if (Buffer.LEN >= AddlReadLen) then]]>
</Line>
<Line Number="541">
<![CDATA[			MID(Buffer, AddlReadLen, 1, MBPacket);]]>
</Line>
<Line Number="542">
<![CDATA[			DELETE(Buffer, AddlReadLen, 1, Buffer);]]>
</Line>
<Line Number="543">
<![CDATA[			DataReceived := 1;]]>
</Line>
<Line Number="544">
<![CDATA[		end_if;]]>
</Line>
<Line Number="545">
<![CDATA[	end_if;]]>
</Line>
<Line Number="546">
<![CDATA[else]]>
</Line>
<Line Number="547">
<![CDATA[	DataReceived := 0;]]>
</Line>
<Line Number="548">
<![CDATA[end_if;]]>
</Line>
<Line Number="549">
<![CDATA[]]>
</Line>
<Line Number="550">
<![CDATA[/*]]>
</Line>
<Line Number="551">
<![CDATA[	Extract ModbusID, ModbusUnit, and data from the packet.]]>
</Line>
<Line Number="552">
<![CDATA[	Check for malformed packets by checking transaction type and protocol identifier.]]>
</Line>
<Line Number="553">
<![CDATA[*/]]>
</Line>
<Line Number="554">
<![CDATA[if (Seq = 610) then]]>
</Line>
<Line Number="555">
<![CDATA[	if (DataReceived) then]]>
</Line>
<Line Number="556">
<![CDATA[		Seq := 620;]]>
</Line>
<Line Number="557">
<![CDATA[		MID(MBPacket, 2, 1, MBID);]]>
</Line>
<Line Number="558">
<![CDATA[		MBTransID := (MBID.DATA[0] * 256) OR MBID.DATA[1];]]>
</Line>
<Line Number="559">
<![CDATA[		MID(MBPacket, 1, 7, MBUnit);]]>
</Line>
<Line Number="560">
<![CDATA[		MBBytes := AddlLen1 - 1;]]>
</Line>
<Line Number="561">
<![CDATA[		MID(MBPacket, MBBytes, 8, MBCmdStr);]]>
</Line>
<Line Number="562">
<![CDATA[		CmdFromPacket := MBCmdStr.DATA[0];]]>
</Line>
<Line Number="563">
<![CDATA[	else]]>
</Line>
<Line Number="564">
<![CDATA[		Seq := 700;]]>
</Line>
<Line Number="565">
<![CDATA[		CmdFromPacket := Buffer.DATA[8];]]>
</Line>
<Line Number="566">
<![CDATA[		]]>
</Line>
<Line Number="567">
<![CDATA[		if (Buffer.DATA[2] <> 0 OR Buffer.DATA[3] <> 0 OR CmdFromPacket < 1 OR ]]>
</Line>
<Line Number="568">
<![CDATA[			(CmdFromPacket > 6 & CmdFromPacket <> 15 & CmdFromPacket <> 16)) then]]>
</Line>
<Line Number="569">
<![CDATA[			Buffer.LEN := 0;]]>
</Line>
<Line Number="570">
<![CDATA[			COP(Buffer.LEN, Buffer.DATA[0], BufferSize);]]>
</Line>
<Line Number="571">
<![CDATA[		end_if;]]>
</Line>
<Line Number="572">
<![CDATA[	end_if;]]>
</Line>
<Line Number="573">
<![CDATA[end_if;]]>
</Line>
<Line Number="574">
<![CDATA[]]>
</Line>
<Line Number="575">
<![CDATA[if (Seq = 620) then]]>
</Line>
<Line Number="576">
<![CDATA[	Seq := 700;]]>
</Line>
<Line Number="577">
<![CDATA[	TransFound := 0;]]>
</Line>
<Line Number="578">
<![CDATA[	TransPtr := 0;]]>
</Line>
<Line Number="579">
<![CDATA[	]]>
</Line>
<Line Number="580">
<![CDATA[	while (TransPtr < ArraySize) do]]>
</Line>
<Line Number="581">
<![CDATA[		if (Ref_Transactions[TransPtr].Enabled & MBTransID = Ref_Transactions[TransPtr].Diag.ID) then]]>
</Line>
<Line Number="582">
<![CDATA[			if (NOT CmdFromPacket.7) then]]>
</Line>
<Line Number="583">
<![CDATA[				Ref_Transactions[TransPtr].Status := 0;]]>
</Line>
<Line Number="584">
<![CDATA[				Ref_Transactions[TransPtr].Diag.ErrorCode := 0;]]>
</Line>
<Line Number="585">
<![CDATA[			else]]>
</Line>
<Line Number="586">
<![CDATA[				Ref_Transactions[TransPtr].Status := -1;]]>
</Line>
<Line Number="587">
<![CDATA[				Ref_Transactions[TransPtr].Diag.ErrorCode := MBBytes;]]>
</Line>
<Line Number="588">
<![CDATA[			end_if;]]>
</Line>
<Line Number="589">
<![CDATA[			]]>
</Line>
<Line Number="590">
<![CDATA[			CWROffset := Ref_Transactions[TransPtr].LocalAddress;]]>
</Line>
<Line Number="591">
<![CDATA[			CWRCount := Ref_Transactions[TransPtr].Count;]]>
</Line>
<Line Number="592">
<![CDATA[			Ref_Transactions[TransPtr].Complete := 1;]]>
</Line>
<Line Number="593">
<![CDATA[			Ref_Transactions[TransPtr].Diag.RequestBuilt := 0;]]>
</Line>
<Line Number="594">
<![CDATA[			Ref_Transactions[TransPtr].Diag.Overload := 0;]]>
</Line>
<Line Number="595">
<![CDATA[			TransFound := 1;]]>
</Line>
<Line Number="596">
<![CDATA[		end_if;]]>
</Line>
<Line Number="597">
<![CDATA[		]]>
</Line>
<Line Number="598">
<![CDATA[		TransPtr := TransPtr + 1;]]>
</Line>
<Line Number="599">
<![CDATA[	end_while;]]>
</Line>
<Line Number="600">
<![CDATA[	]]>
</Line>
<Line Number="601">
<![CDATA[	/*]]>
</Line>
<Line Number="602">
<![CDATA[		Transaction types 1 and 2 (addresses 0xxxx / 1xxxx).]]>
</Line>
<Line Number="603">
<![CDATA[		Transaction types 3 and 4 (addresses 4xxxx / 3xxxx).]]>
</Line>
<Line Number="604">
<![CDATA[		For writes, just treat the current transaction as received.]]>
</Line>
<Line Number="605">
<![CDATA[	*/	]]>
</Line>
<Line Number="606">
<![CDATA[	if (CmdFromPacket = 1 OR CmdFromPacket = 2) then]]>
</Line>
<Line Number="607">
<![CDATA[		MBCmdLen := MBCmdStr.DATA[1];]]>
</Line>
<Line Number="608">
<![CDATA[		]]>
</Line>
<Line Number="609">
<![CDATA[		if (TransFound & (CWRCount <= MBCmdLen * 8)) then]]>
</Line>
<Line Number="610">
<![CDATA[			if (1 <= CWRCount & CWRCount <= 256) then]]>
</Line>
<Line Number="611">
<![CDATA[				BufferByteIndex := 2;]]>
</Line>
<Line Number="612">
<![CDATA[				BufferBitIndex := 0;]]>
</Line>
<Line Number="613">
<![CDATA[				CmdLast := CWRCount - 1 + CWROffset;]]>
</Line>
<Line Number="614">
<![CDATA[				Index := CWROffset;]]>
</Line>
<Line Number="615">
<![CDATA[				]]>
</Line>
<Line Number="616">
<![CDATA[				if (CmdLast < 1024) then]]>
</Line>
<Line Number="617">
<![CDATA[					while (Index <= CmdLast) do]]>
</Line>
<Line Number="618">
<![CDATA[						if (CmdFromPacket = 1) then]]>
</Line>
<Line Number="619">
<![CDATA[							Ref_MBData.Coils[Index] := MBCmdStr.DATA[BufferByteIndex].[BufferBitIndex];]]>
</Line>
<Line Number="620">
<![CDATA[						else]]>
</Line>
<Line Number="621">
<![CDATA[							Ref_MBData.DiscreteInputs[Index] := MBCmdStr.DATA[BufferByteIndex].[BufferBitIndex];]]>
</Line>
<Line Number="622">
<![CDATA[						end_if;]]>
</Line>
<Line Number="623">
<![CDATA[						]]>
</Line>
<Line Number="624">
<![CDATA[						BufferBitIndex := BufferBitIndex + 1;]]>
</Line>
<Line Number="625">
<![CDATA[						]]>
</Line>
<Line Number="626">
<![CDATA[						if (BufferBitIndex > 7) then]]>
</Line>
<Line Number="627">
<![CDATA[							BufferBitIndex := 0;]]>
</Line>
<Line Number="628">
<![CDATA[							BufferByteIndex := BufferByteIndex + 1;]]>
</Line>
<Line Number="629">
<![CDATA[						end_if;]]>
</Line>
<Line Number="630">
<![CDATA[						]]>
</Line>
<Line Number="631">
<![CDATA[						Index := Index + 1;]]>
</Line>
<Line Number="632">
<![CDATA[					end_while;]]>
</Line>
<Line Number="633">
<![CDATA[				end_if;]]>
</Line>
<Line Number="634">
<![CDATA[			end_if;]]>
</Line>
<Line Number="635">
<![CDATA[		end_if;]]>
</Line>
<Line Number="636">
<![CDATA[	elsif (CmdFromPacket = 3 OR CmdFromPacket = 4) then]]>
</Line>
<Line Number="637">
<![CDATA[		MBCmdLen := (MBCmdStr.DATA[1] & 16#FF) / 2;]]>
</Line>
<Line Number="638">
<![CDATA[		]]>
</Line>
<Line Number="639">
<![CDATA[		if (TransFound & CWRCount <= MBCmdLen) then]]>
</Line>
<Line Number="640">
<![CDATA[			if (1 <= CWRCount & CWRCount <= 120) then]]>
</Line>
<Line Number="641">
<![CDATA[				StrPos := 2;]]>
</Line>
<Line Number="642">
<![CDATA[				CmdLast := CWRCount - 1 + CWROffset;]]>
</Line>
<Line Number="643">
<![CDATA[				Index := CWROffset;]]>
</Line>
<Line Number="644">
<![CDATA[				]]>
</Line>
<Line Number="645">
<![CDATA[				while (Index <= CmdLast) do]]>
</Line>
<Line Number="646">
<![CDATA[					COP(MBCmdStr.DATA[StrPos], INT, 1);]]>
</Line>
<Line Number="647">
<![CDATA[					]]>
</Line>
<Line Number="648">
<![CDATA[					if (CmdFromPacket = 3) then]]>
</Line>
<Line Number="649">
<![CDATA[						SWPB(INT, REVERSE, Ref_MBData.HoldingRegisters[Index]);]]>
</Line>
<Line Number="650">
<![CDATA[					else]]>
</Line>
<Line Number="651">
<![CDATA[						SWPB(INT, REVERSE, Ref_MBData.InputRegisters[Index]);]]>
</Line>
<Line Number="652">
<![CDATA[					end_if;]]>
</Line>
<Line Number="653">
<![CDATA[					]]>
</Line>
<Line Number="654">
<![CDATA[					StrPos := StrPos + 2;]]>
</Line>
<Line Number="655">
<![CDATA[					Index := Index + 1;]]>
</Line>
<Line Number="656">
<![CDATA[				end_while;]]>
</Line>
<Line Number="657">
<![CDATA[			end_if;]]>
</Line>
<Line Number="658">
<![CDATA[		end_if;]]>
</Line>
<Line Number="659">
<![CDATA[	end_if;]]>
</Line>
<Line Number="660">
<![CDATA[end_if;]]>
</Line>
<Line Number="661">
<![CDATA[]]>
</Line>
<Line Number="662">
<![CDATA[/*]]>
</Line>
<Line Number="663">
<![CDATA[	Packet processing finished (or no data received).]]>
</Line>
<Line Number="664">
<![CDATA[*/]]>
</Line>
<Line Number="665">
<![CDATA[if (Seq = 700) then]]>
</Line>
<Line Number="666">
<![CDATA[	Seq := 300;]]>
</Line>
<Line Number="667">
<![CDATA[	StepTimer.Reset := 1;]]>
</Line>
<Line Number="668">
<![CDATA[end_if;]]>
</Line>
<Line Number="669">
<![CDATA[]]>
</Line>
<Line Number="670">
<![CDATA[/*]]>
</Line>
<Line Number="671">
<![CDATA[	Clear requests.]]>
</Line>
<Line Number="672">
<![CDATA[*/]]>
</Line>
<Line Number="673">
<![CDATA[if (Seq = 800) then]]>
</Line>
<Line Number="674">
<![CDATA[	Seq := 900;]]>
</Line>
<Line Number="675">
<![CDATA[	StepTimer.Reset := 1;]]>
</Line>
<Line Number="676">
<![CDATA[	Index := 0;]]>
</Line>
<Line Number="677">
<![CDATA[	Enabled := 0;]]>
</Line>
<Line Number="678">
<![CDATA[	Connected := 0;]]>
</Line>
<Line Number="679">
<![CDATA[	Fault := 0;]]>
</Line>
<Line Number="680">
<![CDATA[	Result := -12;]]>
</Line>
<Line Number="681">
<![CDATA[	]]>
</Line>
<Line Number="682">
<![CDATA[	while (Index < ArraySize) do]]>
</Line>
<Line Number="683">
<![CDATA[		Ref_Transactions[Index].Diag.RequestBuilt := 0;]]>
</Line>
<Line Number="684">
<![CDATA[		Index := Index + 1;]]>
</Line>
<Line Number="685">
<![CDATA[	end_while;]]>
</Line>
<Line Number="686">
<![CDATA[end_if;]]>
</Line>
<Line Number="687">
<![CDATA[]]>
</Line>
<Line Number="688">
<![CDATA[if (Seq = 900) then]]>
</Line>
<Line Number="689">
<![CDATA[	Connected := 0;]]>
</Line>
<Line Number="690">
<![CDATA[	Buffer.LEN := 0;]]>
</Line>
<Line Number="691">
<![CDATA[	COP(Buffer.LEN, Buffer.DATA[0], BufferSize);]]>
</Line>
<Line Number="692">
<![CDATA[	]]>
</Line>
<Line Number="693">
<![CDATA[	if (Instance = 0) then]]>
</Line>
<Line Number="694">
<![CDATA[		Seq := 0;]]>
</Line>
<Line Number="695">
<![CDATA[	else]]>
</Line>
<Line Number="696">
<![CDATA[		Ref_MsgDelete.Instance := Instance;]]>
</Line>
<Line Number="697">
<![CDATA[		MsgFlags.5 := 1;]]>
</Line>
<Line Number="698">
<![CDATA[	end_if;]]>
</Line>
<Line Number="699">
<![CDATA[end_if;]]>
</Line>
<Line Number="700">
<![CDATA[]]>
</Line>
<Line Number="701">
<![CDATA[if (MsgFlags.5 & (Ref_MsgDelete.DN OR Ref_MsgDelete.ER OR NOT Ref_MsgDelete.EN)) then]]>
</Line>
<Line Number="702">
<![CDATA[	MSG(Ref_MsgDelete);]]>
</Line>
<Line Number="703">
<![CDATA[	MsgFlags.5 := 0;]]>
</Line>
<Line Number="704">
<![CDATA[	Seq := 910;]]>
</Line>
<Line Number="705">
<![CDATA[end_if;]]>
</Line>
<Line Number="706">
<![CDATA[]]>
</Line>
<Line Number="707">
<![CDATA[if (Seq = 910) then]]>
</Line>
<Line Number="708">
<![CDATA[	if (Ref_MsgDelete.DN OR Ref_MsgDelete.ER) then]]>
</Line>
<Line Number="709">
<![CDATA[		Instance := 0;]]>
</Line>
<Line Number="710">
<![CDATA[		Seq := 0;]]>
</Line>
<Line Number="711">
<![CDATA[	end_if;]]>
</Line>
<Line Number="712">
<![CDATA[end_if;]]>
</Line>
<Line Number="713">
<![CDATA[]]>
</Line>
<Line Number="714">
<![CDATA[/*]]>
</Line>
<Line Number="715">
<![CDATA[	Interval, Retry, Step timers]]>
</Line>
<Line Number="716">
<![CDATA[*/]]>
</Line>
<Line Number="717">
<![CDATA[Index := 0;]]>
</Line>
<Line Number="718">
<![CDATA[while (Index < ArraySize) do]]>
</Line>
<Line Number="719">
<![CDATA[	if (Ref_Transactions[Index].PollInterval >= 80) then]]>
</Line>
<Line Number="720">
<![CDATA[		Ref_Transactions[Index].Diag.IntervalTimer.PRE := Ref_Transactions[Index].PollInterval - 40;]]>
</Line>
<Line Number="721">
<![CDATA[	else]]>
</Line>
<Line Number="722">
<![CDATA[		Ref_Transactions[Index].PollInterval := 1000;]]>
</Line>
<Line Number="723">
<![CDATA[	end_if;]]>
</Line>
<Line Number="724">
<![CDATA[	]]>
</Line>
<Line Number="725">
<![CDATA[	Ref_Transactions[Index].Diag.IntervalTimer.TimerEnable := Ref_Transactions[Index].Enabled;]]>
</Line>
<Line Number="726">
<![CDATA[	TONR(Ref_Transactions[Index].Diag.IntervalTimer);]]>
</Line>
<Line Number="727">
<![CDATA[	]]>
</Line>
<Line Number="728">
<![CDATA[	if (Ref_Transactions[Index].Diag.IntervalTimer.Reset) then]]>
</Line>
<Line Number="729">
<![CDATA[		Ref_Transactions[Index].Diag.IntervalTimer.Reset := 0;]]>
</Line>
<Line Number="730">
<![CDATA[	end_if;]]>
</Line>
<Line Number="731">
<![CDATA[	]]>
</Line>
<Line Number="732">
<![CDATA[	Ref_Transactions[Index].Diag.PendingTimer.PRE := 3000;]]>
</Line>
<Line Number="733">
<![CDATA[	Ref_Transactions[Index].Diag.PendingTimer.TimerEnable := Ref_Transactions[Index].Diag.RequestBuilt;]]>
</Line>
<Line Number="734">
<![CDATA[	TONR(Ref_Transactions[Index].Diag.PendingTimer);]]>
</Line>
<Line Number="735">
<![CDATA[	]]>
</Line>
<Line Number="736">
<![CDATA[	if (Ref_Transactions[Index].Diag.PendingTimer.Reset) then]]>
</Line>
<Line Number="737">
<![CDATA[		Ref_Transactions[Index].Diag.PendingTimer.Reset := 0;]]>
</Line>
<Line Number="738">
<![CDATA[	end_if;]]>
</Line>
<Line Number="739">
<![CDATA[	]]>
</Line>
<Line Number="740">
<![CDATA[	if (Ref_Transactions[Index].Diag.PendingTimer.DN) then]]>
</Line>
<Line Number="741">
<![CDATA[		Ref_Transactions[Index].Diag.RequestBuilt := 0;]]>
</Line>
<Line Number="742">
<![CDATA[		Ref_Transactions[Index].Diag.Overload := 1;]]>
</Line>
<Line Number="743">
<![CDATA[	end_if;]]>
</Line>
<Line Number="744">
<![CDATA[	]]>
</Line>
<Line Number="745">
<![CDATA[	Index := Index + 1;]]>
</Line>
<Line Number="746">
<![CDATA[end_while;]]>
</Line>
<Line Number="747">
<![CDATA[]]>
</Line>
<Line Number="748">
<![CDATA[StepTimer.PRE := 10000;]]>
</Line>
<Line Number="749">
<![CDATA[StepTimer.TimerEnable := 1;]]>
</Line>
<Line Number="750">
<![CDATA[]]>
</Line>
<Line Number="751">
<![CDATA[if (StepTimer.DN & NOT StepTimer.Reset) then]]>
</Line>
<Line Number="752">
<![CDATA[	StepTimer.Reset := 1;]]>
</Line>
<Line Number="753">
<![CDATA[	Seq := 900;]]>
</Line>
<Line Number="754">
<![CDATA[end_if;]]>
</Line>
<Line Number="755">
<![CDATA[]]>
</Line>
<Line Number="756">
<![CDATA[TONR(StepTimer);]]>
</Line>
<Line Number="757">
<![CDATA[]]>
</Line>
<Line Number="758">
<![CDATA[if (StepTimer.Reset) then]]>
</Line>
<Line Number="759">
<![CDATA[	StepTimer.Reset := 0;]]>
</Line>
<Line Number="760">
<![CDATA[end_if;]]>
</Line>
<Line Number="761">
<![CDATA[]]>
</Line>
<Line Number="762">
<![CDATA[Index := 0;]]>
</Line>
<Line Number="763">
<![CDATA[while (Index < ArraySize) do]]>
</Line>
<Line Number="764">
<![CDATA[	if ((Ref_Transactions[Index].Diag.Overlap OR Ref_Transactions[Index].Diag.Overload) & Enabled) then]]>
</Line>
<Line Number="765">
<![CDATA[		if (Ref_Transactions[Index].Diag.Overlap) then]]>
</Line>
<Line Number="766">
<![CDATA[			Overlap := 1;]]>
</Line>
<Line Number="767">
<![CDATA[		elsif (Ref_Transactions[Index].Diag.Overload) then]]>
</Line>
<Line Number="768">
<![CDATA[			Overload := 1;]]>
</Line>
<Line Number="769">
<![CDATA[		end_if;]]>
</Line>
<Line Number="770">
<![CDATA[		exit;]]>
</Line>
<Line Number="771">
<![CDATA[	else]]>
</Line>
<Line Number="772">
<![CDATA[		Overlap := 0;]]>
</Line>
<Line Number="773">
<![CDATA[		Overload := 0;]]>
</Line>
<Line Number="774">
<![CDATA[	end_if;]]>
</Line>
<Line Number="775">
<![CDATA[	]]>
</Line>
<Line Number="776">
<![CDATA[	Index := Index + 1;]]>
</Line>
<Line Number="777">
<![CDATA[end_while;]]>
</Line>
<Line Number="778">
<![CDATA[]]>
</Line>
<Line Number="779">
<![CDATA[Val_Result := Result;]]>
</Line>
<Line Number="780">
<![CDATA[Val_Instance := Instance;]]>
</Line>
<Line Number="781">
<![CDATA[Sts_Enabled := Enabled;]]>
</Line>
<Line Number="782">
<![CDATA[Sts_Connected := Connected;]]>
</Line>
<Line Number="783">
<![CDATA[Sts_Fault := Fault;]]>
</Line>
<Line Number="784">
<![CDATA[Sts_Overlap := Overlap;]]>
</Line>
<Line Number="785">
<![CDATA[Sts_Overload := Overload;]]>
</Line>
<Line Number="786">
<![CDATA[]]>
</Line>
</STContent>
</Routine>
<Routine Name="Prescan" Type="ST">
<STContent>
<Line Number="0">
<![CDATA[]]>
</Line>
<Line Number="1">
<![CDATA[/*]]>
</Line>
<Line Number="2">
<![CDATA[	AO_MBTCP_Client]]>
</Line>
<Line Number="3">
<![CDATA[*/]]>
</Line>
<Line Number="4">
<![CDATA[]]>
</Line>
<Line Number="5">
<![CDATA[WriteIndex := 0;]]>
</Line>
<Line Number="6">
<![CDATA[Index := 0;]]>
</Line>
<Line Number="7">
<![CDATA[Instance := 0;]]>
</Line>
<Line Number="8">
<![CDATA[Result := 0;]]>
</Line>
<Line Number="9">
<![CDATA[Seq := 0;]]>
</Line>
<Line Number="10">
<![CDATA[MsgFlags := 0;]]>
</Line>
<Line Number="11">
<![CDATA[]]>
</Line>
<Line Number="12">
<![CDATA[Enabled := 0;]]>
</Line>
<Line Number="13">
<![CDATA[Connected := 0;]]>
</Line>
<Line Number="14">
<![CDATA[Fault := 0;]]>
</Line>
<Line Number="15">
<![CDATA[Overlap := 0;]]>
</Line>
<Line Number="16">
<![CDATA[Overload := 0;]]>
</Line>
<Line Number="17">
<![CDATA[]]>
</Line>
</STContent>
</Routine>
</Routines>
<Dependencies>
<Dependency Type="DataType" Name="STR_4096"/>
<Dependency Type="DataType" Name="ST_MBTCP_ConnectParams"/>
<Dependency Type="DataType" Name="ST_MBTCP_CreateParams"/>
<Dependency Type="DataType" Name="STR_16"/>
<Dependency Type="DataType" Name="STR_462"/>
<Dependency Type="DataType" Name="STR_8"/>
<Dependency Type="AddOnInstructionDefinition" Name="AO_RTC_PulseGen"/>
<Dependency Type="DataType" Name="ST_MBTCP_ClientConnection"/>
<Dependency Type="DataType" Name="ST_MBTCP_ClientData"/>
<Dependency Type="DataType" Name="ST_MBTCP_ClientTransaction"/>
</Dependencies>
</AddOnInstructionDefinition>
</AddOnInstructionDefinitions>
</Controller>
</RSLogix5000Content>
